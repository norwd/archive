<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>libraries | suckless.org software that sucks less</title>
	<link rel="stylesheet" type="text/css" href="https://suckless.org/pub/style.css"/>
</head>

<div id="header">
	<a href="https://suckless.org/"><img src="https://suckless.org/logo.svg" alt=""/></a>&nbsp;
	<a id="headerLink" href="https://suckless.org/">suckless.org</a>
	<span class="hidden"> - </span>
	<span id="headerSubtitle">libraries</span>
</div>
<hr class="hidden"/>
<div id="menu">
	<a href="https://suckless.org/">home</a>
	<a href="https://dwm.suckless.org/">dwm</a>
	<a href="https://st.suckless.org/">st</a>
	<a href="https://core.suckless.org/">core</a>
	<a href="https://surf.suckless.org/">surf</a>
	<a href="https://tools.suckless.org/">tools</a>
	<a href="../../../index.html"><b>libs</b></a>
	<a href="https://ev.suckless.org/">e.V.</a>
	<span class="right">
		<a href="https://dl.suckless.org/">download</a>
		<a href="https://git.suckless.org/">source</a>
	</span>
</div>
<hr class="hidden"/>
<div id="content">
<div id="nav">
	<ul>
	<li><a href="../../../index.html">about</a></li>
	<li><a href="../../../deprecated/index.html">deprecated/</a></li>
	<li><a href="../../index.html"><b>libgrapheme/</b></a>
		<ul>
		<li><a href="../index.html"><b>man/</b></a>
			<ul>
			<li><a href="../grapheme_decode_utf8.3/index.html">grapheme decode utf8.3/</a></li>
			<li><a href="index.html"><b>grapheme encode utf8.3/</b></a></li>
			<li><a href="../grapheme_is_character_break.3/index.html">grapheme is character break.3/</a></li>
			<li><a href="../grapheme_is_lowercase.3/index.html">grapheme is lowercase.3/</a></li>
			<li><a href="../grapheme_is_lowercase_utf8.3/index.html">grapheme is lowercase utf8.3/</a></li>
			<li><a href="../grapheme_is_titlecase.3/index.html">grapheme is titlecase.3/</a></li>
			<li><a href="../grapheme_is_titlecase_utf8.3/index.html">grapheme is titlecase utf8.3/</a></li>
			<li><a href="../grapheme_is_uppercase.3/index.html">grapheme is uppercase.3/</a></li>
			<li><a href="../grapheme_is_uppercase_utf8.3/index.html">grapheme is uppercase utf8.3/</a></li>
			<li><a href="../grapheme_next_character_break.3/index.html">grapheme next character break.3/</a></li>
			<li><a href="../grapheme_next_character_break_utf8.3/index.html">grapheme next character break utf8.3/</a></li>
			<li><a href="../grapheme_next_line_break.3/index.html">grapheme next line break.3/</a></li>
			<li><a href="../grapheme_next_line_break_utf8.3/index.html">grapheme next line break utf8.3/</a></li>
			<li><a href="../grapheme_next_sentence_break.3/index.html">grapheme next sentence break.3/</a></li>
			<li><a href="../grapheme_next_sentence_break_utf8.3/index.html">grapheme next sentence break utf8.3/</a></li>
			<li><a href="../grapheme_next_word_break.3/index.html">grapheme next word break.3/</a></li>
			<li><a href="../grapheme_next_word_break_utf8.3/index.html">grapheme next word break utf8.3/</a></li>
			<li><a href="../grapheme_to_lowercase.3/index.html">grapheme to lowercase.3/</a></li>
			<li><a href="../grapheme_to_lowercase_utf8.3/index.html">grapheme to lowercase utf8.3/</a></li>
			<li><a href="../grapheme_to_titlecase.3/index.html">grapheme to titlecase.3/</a></li>
			<li><a href="../grapheme_to_titlecase_utf8.3/index.html">grapheme to titlecase utf8.3/</a></li>
			<li><a href="../grapheme_to_uppercase.3/index.html">grapheme to uppercase.3/</a></li>
			<li><a href="../grapheme_to_uppercase_utf8.3/index.html">grapheme to uppercase utf8.3/</a></li>
			<li><a href="../libgrapheme.7/index.html">libgrapheme.7/</a></li>
			</ul>
		</li>
		</ul>
	</li>
	<li><a href="../../../libzahl/index.html">libzahl/</a></li>
	</ul>
</div>
<hr class="hidden"/>
<div id="main">

<p>GRAPHEME_ENCODE_UTF8(3) - Library Functions Manual</p>
<h1>NAME</h1>
<p><strong>grapheme_encode_utf8</strong> - encode codepoint into UTF-8 string</p>
<h1>SYNOPSIS</h1>
<p><strong>#include &lt;grapheme.h&gt;</strong></p>
<p><em>size_t</em><br />  
<strong>grapheme_encode_utf8</strong>(<em>uint_least32_t cp</em>, <em>char *str</em>, <em>size_t len</em>);</p>
<h1>DESCRIPTION</h1>
<p>The
<strong>grapheme_encode_utf8</strong>()
function encodes the codepoint
<em>cp</em>
into a UTF-8-string.
If
<em>str</em>
is not
<code>NULL</code>
and
<em>len</em>
is large enough it writes the UTF-8-string to the memory pointed to by
<em>str</em>.
Otherwise no data is written.</p>
<h1>RETURN VALUES</h1>
<p>The
<strong>grapheme_encode_utf8</strong>()
function returns the length (in bytes) of the UTF-8-string resulting
from encoding
<em>cp</em>,
even if
<em>len</em>
is not large enough or
<em>str</em>
is
<code>NULL</code>.</p>
<h1>EXAMPLES</h1>
<pre><code>/* cc (-static) -o example example.c -lgrapheme */
#include &lt;grapheme.h&gt;
#include &lt;stddef.h&gt;
#include &lt;stdlib.h&gt;

size_t
cps_to_utf8(const uint_least32_t *cp, size_t cplen, char *str, size_t len)
{
	size_t i, off, ret;

	for (i = 0, off = 0; i &lt; cplen; i++, off += ret) {
		if ((ret = grapheme_encode_utf8(cp[i], str + off,
		                                len - off)) &gt; (len - off)) {
			/* buffer too small */
			break;
		}
	}

	return off;
}

size_t
cps_bytelen(const uint_least32_t *cp, size_t cplen)
{
	size_t i, len;

	for (i = 0, len = 0; i &lt; cplen; i++) {
		len += grapheme_encode_utf8(cp[i], NULL, 0);
	}

	return len;
}

char *
cps_to_utf8_alloc(const uint_least32_t *cp, size_t cplen)
{
	char *str;
	size_t len, i, ret, off;

	len = cps_bytelen(cp, cplen);

	if (!(str = malloc(len))) {
		return NULL;
	}

	for (i = 0, off = 0; i &lt; cplen; i++, off += ret) {
		if ((ret = grapheme_encode_utf8(cp[i], str + off,
		                                len - off)) &gt; (len - off)) {
			/* buffer too small */
			break;
		}
	}
	str[off] = '\0';

	return str;
}
</code></pre>
<h1>SEE ALSO</h1>
<p>grapheme_decode_utf8(3),
libgrapheme(7)</p>
<h1>AUTHORS</h1>
<p>Laslo Hunhold (<a href="mailto:dev@frign.de">dev@frign.de</a>)</p>
<p>suckless.org - 2022-10-06</p>
</div>

</div>

</html>
