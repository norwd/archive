<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.3.0, see http://www.hypermail-project.org/" />
<title>Re: [scc-dev] C99 and man pages from Roberto E. Vargas Caballero on 2025-04-21 (scc-dev)</title>
<meta name="Author" content="Roberto E. Vargas Caballero (k0ga_at_shike2.net)" />
<meta name="Subject" content="Re: [scc-dev] C99 and man pages" />
<meta name="Date" content="2025-04-21" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
.period {font-weight: bold}
</style>
</head>
<body>
<div class="head">
<h1>Re: [scc-dev] C99 and man pages</h1>
<!-- received="Mon, 21 Apr 2025 18:03:33 +0200" -->
<!-- isoreceived="20250421160333" -->
<!-- sent="Mon, 21 Apr 2025 18:03:33 +0200" -->
<!-- isosent="20250421160333" -->
<!-- name="Roberto E. Vargas Caballero" -->
<!-- email="k0ga_at_shike2.net" -->
<!-- subject="Re: [scc-dev] C99 and man pages" -->
<!-- id="aAZsVcL1jKiN7-Fw_at_simple-cc.org" -->
<!-- charset="utf-8" -->
<!-- inreplyto="20250421172548.1709276d.quinq_at_fifth.space" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="0096.html#start96" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ More options (<a href="0096.html#options2">top</a>, <a href="0096.html#options3">bottom</a>) ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="0097.html" title="Xavier Del Campo Romero: &quot;Struct initialization with compatible type&quot;">Next message</a> ]
[ <a href="0095.html" title="Quentin Rameau: &quot;Re: [scc-dev] C99 and man pages&quot;">Previous message</a> ]
[ <a href="0095.html" title="Quentin Rameau: &quot;Re: [scc-dev] C99 and man pages&quot;">In reply to</a> ]
[ <a href="0091.html" title="Message to which this message replies: &quot;Roberto E. Vargas Caballero&quot;">[scc-dev] C99 and man pages</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg96" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg96" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg96" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg96" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Roberto E. Vargas Caballero &lt;<a href="mailto:k0ga_at_shike2.net?Subject=Re%3A%20%5Bscc-dev%5D%20C99%20and%20man%20pages">k0ga_at_shike2.net</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: Mon, 21 Apr 2025 18:03:33 +0200</span><br />
</address>
<br />
Hi,
<br />
<br />On Mon, Apr 21, 2025 at 05:25:48PM +0200, Quentin Rameau wrote:
<br />
<a href="0091.html#0096qlink1">&gt; &gt; &gt; &gt; I noticied today that the libc man pages are basically the
</a><br>
<em class="quotelev4">&gt; &gt; &gt; &gt; sections of the daft C99 standard. Giving that it is allowed to
</em><br><em class="quotelev4">&gt; &gt; &gt; &gt; redistibute the draft or any part of it (checked with a member of
</em><br><em class="quotelev4">&gt; &gt; &gt; &gt; the WG14) we should remove them from the repository.  
</em><br><em class="quotelev3">&gt; &gt; &gt; 
</em><br><em class="quotelev3">&gt; &gt; &gt; Why should we?
</em><br><em class="quotelev3">&gt; &gt; &gt; Isn't it handy to provide those?  
</em><br><em class="quotelev2">&gt; &gt; 
</em><br><em class="quotelev2">&gt; &gt; The problem is that the C99 specs *cannot* be re distributed
</em><br><em class="quotelev2">&gt; &gt; (important typo in the original mail). In theory, we could
</em><br><em class="quotelev2">&gt; &gt; be taken to court because we are distributing them. The problem
</em><br><em class="quotelev2">&gt; &gt; is that Naveem almost copied verbatim the specs. In order to
</em><br><em class="quotelev2">&gt; &gt; have them we would have to rephrase all the man pages.
</em><br><em class="quotelev1">&gt; 
</em><br><em class="quotelev1">&gt; Ah yeah, I missed the following email correcting the wording :D
</em><br><em class="quotelev1">&gt; 
</em><br><em class="quotelev1">&gt; Buuut, while this kind of make sense, this is *everywhere*
</em><br><em class="quotelev1">&gt; in the ecosystem.
</em><br><em class="quotelev1">&gt; 
</em><br><em class="quotelev1">&gt; Like it's in POSIX that copies almost verbatim the C* standard,
</em><br><em class="quotelev1">&gt; in turn it's also in the “POSIX man-pages” for example.
</em><br><em class="quotelev1">&gt; 
</em><br><em class="quotelev1">&gt; I'm not sure about the GNU libc man-pages, but I assume it's
</em><br><em class="quotelev1">&gt; pretty well the same. Maybe they changed a word here and there.
</em><br><br />Let me put some examples:
<br />
<br />- ISO/IEC 9899:1999 Section 7.13.1.1 Paragraph 1,2,3
<br />
- ISO/IEC 9899:1999 Section 7.13.2.1 Paragraph 1,2,3,4
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The setjmp macro saves its calling environment in its jmp_buf
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argument for later use by the longjmp function.
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The longjmp function restores the environment saved by the most
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recent invocation of the setjmp macro in the same invocation of the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program with the corresponding jmp_buf argument. If there has been
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no such invocation, or if the function containing the invocation
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the setjmp macro has terminated execution217) in the interim,
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or if the invocation of the setjmp macro was within the scope of
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an identifier with variably modified type and execution has left
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that scope in the interim, the behavior is undefined.
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All accessible objects have values, and all other components of the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstract machine218) have state, as of the time the longjmp function
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was called, except that the values of objects of automatic storage
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration that are local to the function containing the invocation
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the corresponding setjmp macro that do not have volatile-qualified
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type and have been changed between the setjmp invocation and longjmp
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call are indeterminate.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the return is from a direct invocation, the setjmp macro returns
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the value zero. If the return is from a call to the longjmp function,
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the setjmp macro returns a nonzero value.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After longjmp is completed, program execution continues as if the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corresponding invocation of the setjmp macro had just returned the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value specified by val. The longjmp function cannot cause the setjmp
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;macro to return the value 0; if val is 0, the setjmp macro returns
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the value 1.
<br />
<br />- scc man page
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The  setjmp() function saves it calling environment in its argument env
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for later use by the longjmp.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The longjmp() function restores the environment saved by the  most  re‐
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cent  invocation  of  setjmp in the same invocation of the program with
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the corresponding env as argument.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If there has been no such invocation, or if the function containing the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocation of setjmp has terminated execution, or if the invocation  of
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setjmp  was  within  the  scope of an identifier with variably modified
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type and execution has left that scope in interim, the behavior is  un‐
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defined.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RETURN VALUE
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If  the  return  is  from  a direct invocation, setjmp shall return the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value zero.  If the return is from a call to longjmp, setjmp shall  re‐
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn a nonzero value.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After the function longjmp is called, program execution continues as if
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the  corresponding  invocation  of  setjmp  has just returned the value
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specified by val.  The function longjmp shall not  cause  the  function
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setjmp  to return the value 0.  If val is set to 0, setjmp shall return
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the value 1.
<br />
<br /><br />- glibc man page
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The functions described on this page are used for performing &quot;nonlocal
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gotos&quot;: transferring execution from one function to a predetermined
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location in another function.  The setjmp() function dynamically
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;establishes the target to which control will later be transferred, and
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;longjmp() performs the transfer of execution.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The setjmp() function saves various information about the calling
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment (typically, the stack pointer, the instruction pointer,
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;possibly the values of other registers and the signal mask) in the
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer env for later use by longjmp().  In this case, setjmp() returns
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The longjmp() function uses the information saved in env to transfer
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control back to the point where setjmp() was called and to restore
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;rewind&quot;) the stack to its state at the time of the setjmp() call.  In
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addition, and depending on the implementation (see NOTES), the values
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of some other registers and the process signal mask may be restored to
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;their state at the time of the setjmp() call.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Following a successful longjmp(), execution continues as if setjmp()
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;had returned for a second time.  This &quot;fake&quot; return can be
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distinguished from a true setjmp() call because the &quot;fake&quot; return
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns the value provided in val.  If the programmer mistakenly passes
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the value 0 in val, the &quot;fake&quot; return will instead return 1.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RETURN VALUE
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setjmp() and sigsetjmp() return 0 when called directly; on the &quot;fake&quot;
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return that occurs after longjmp() or siglongjmp(), the nonzero value
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specified in val is returned.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The longjmp() or siglongjmp() functions do not return.
<br />
<br /><br />- openbsd man page
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sigsetjmp(), setjmp(), and _setjmp() functions save their calling
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;environment in env.  Each of these functions returns 0.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The corresponding longjmp() functions restore the environment saved by
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the most recent invocation of the respective setjmp() function.  They
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then return so that program execution continues as if the corresponding
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocation of the setjmp() call had just returned the value specified by
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val, instead of 0.  The value specified by val must be non-zero; a 0
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value is treated as 1 to allow the programmer to differentiate between a
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;direct invocation of setjmp() and a return via longjmp().
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pairs of calls may be intermixed; i.e., both sigsetjmp() and siglongjmp()
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as well as setjmp() and longjmp() combinations may be used in the same
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program.  However, individual calls may not — e.g., the env argument to
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setjmp() may not be passed to siglongjmp().
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The longjmp() routines may not be called after the routine which called
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the setjmp() routines returns.
<br />
<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All accessible objects have values as of the time the longjmp() routine
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was called, except that the values of objects of automatic storage
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocation duration that do not have the volatile type and have been
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed between the setjmp() invocation and longjmp() call are
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indeterminate.
<br />
<br />-----------
<br />
<br />As you can see, all the man pages reworded the descriptions to avoid
<br />
being a verbatim copy. In our case thye changes are minimal.
<br />
<br /><br />Regards,
<br />
<pre>
--
To unsubscribe send a mail to scc-dev+unsubscribe_at_simple-cc.org
</pre>
<span id="received"><dfn>Received on</dfn> Mon 21 Apr 2025 - 18:03:33 CEST</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="0096.html#start96">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="0097.html" title="Next message in the list">Xavier Del Campo Romero: "Struct initialization with compatible type"</a></li>
<li><dfn>Previous message</dfn>: <a href="0095.html" title="Previous message in the list">Quentin Rameau: "Re: [scc-dev] C99 and man pages"</a></li>
<li><dfn>In reply to</dfn>: <a href="0095.html" title="Message to which this message replies">Quentin Rameau: "Re: [scc-dev] C99 and man pages"</a></li>
<li><dfn>In reply to</dfn> <a href="0091.html" title="Message to which this message replies">Roberto E. Vargas Caballero: "[scc-dev] C99 and man pages"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options3" id="options3"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#msg96" title="Contemporary messages by date">by date</a> ] [ <a href="index.html#msg96" title="Contemporary discussion threads">by thread</a> ] [ <a href="subject.html#msg96" title="Contemporary messages by subject">by subject</a> ] [ <a href="author.html#msg96" title="Contemporary messages by author">by author</a> ] [ <a href="attachment.html" title="Contemporary messages by attachment">by messages with attachments</a> ]</li>
</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail-project.org/">hypermail 2.3.0</a>
: Mon 21 Apr 2025 - 18:10:01 CEST
</em></small></p>
</body>
</html>
