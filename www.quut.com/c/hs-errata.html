<html>
<head><title>Errata: Harbinson, Steele: &quot;C: A Reference Manual, Third Edition&quot;
</title>
<link rel="made" rev="made" href="mailto:jutta@pobox.com">
</head>
<body>
From harbison@bert.pinecreek.com Sun Mar  1 13:50:16 1992<br>
Message-Id: &lt;9203012048.AA24637@bert.pinecreek.com&gt;<br>
To: Nelson H. F. Beebe &lt;beebe@math.utah.edu&gt;<br>
Cc: harbison@bert.pinecreek.com, Guy Steele &lt;gls@think.com&gt;<br>
Subject: Re: [beebe@math.utah.edu: Erratum in H&amp;S CARM 3rd ed.] <br>
Date: Sun, 01 Mar 92 12:48:17 PST<br>
From: harbison@bert.pinecreek.com<br>
<br>
<a name="main">There</a> is no errata list for the 1st or 2nd editions.&#160;<tt> </tt>
Below is the most recent errata list for the 3rd edition.
<hr>
<h1>
Errata:&#160;<tt> </tt>C: A Reference Manual, Third Edition<br>
</h1>
<hr>
<!-- Sunday, September 22, 1991.-->
<p>
This is a cumulative list of changes and comments on Harbison and
Steele's <i>C: A Reference Manual, Third Edition, Prentice Hall, 1991</i>.&#160;<tt> </tt>
Some or all of these problems may have been corrected in the third and
later printings of the book.&#160;<tt> </tt>Please send any additional comments to
<a href="mailto:harbison@bert.pinecreek.com">harbison@bert.pinecreek.com</a>.
<p>
I would like to thank Aurelio Bignoli, Steve Clamage of TauMetric
Corp., Roy J. Fuller of the University of Arkansas, Morris M. Kessan,
George V. Reilly of Brown University, Mark Lan of Microsoft, Mike
Hewett of IBM, and Steve Vegdahl for reporting problems.&#160;<tt> </tt>I especially
want to thank Steve Vinoski of HP Apollo Division, who proofread the
entire third edition and reported most of problems listed here.
<p>

<h1>1&#160;<tt> </tt>Content Problems</h1>

Please make the following corrections if necessary.
<dl>
<dt><i>p. 19</i>&#160;<tt> </tt>In the last paragraph, the first sentence should be
	changed to,
<dd>
	<blockquote>
	&quot;If the value of an integer constant exceeds the largest 
	integer representable in type unsigned long, the result is
	undefined.&quot;
	</blockquote>
	(The original sentence applied to traditional C.)
<p>
<dt><i>p. 38</i>&#160;<tt> </tt>In line 18, change &quot;<code>if (n !== m)</code>&quot;
	to &quot;<code>if (n != m)</code>&quot;.
<dd><p>
<dt><i>p. 69</i>&#160;<tt> </tt>In
	lines 21-24, the type specifier examples should be formatted into
<dd>	two columns, like this:
<pre>
   void			union { int a; char b; }
   int			enum {red, blue, green}
   unsigned long int	char
   my_struct_type	float
</pre>

<dt><i>p. 82</i>&#160;<tt> </tt>	In the first line in the table, change
	&quot;<code>int *x();</code>&quot; 
	to &quot;<code>int x();</code>&quot;.
<dd>
<p>
<dt><i>p. 89</i>&#160;<tt> </tt>	Line 9 should read
<dd><pre>
   char q[5]   = { 'A', '\0', '\0', '\0', '\0' };
</pre>
	to emphasize that all elements of the array are initialized.
<p>
<dt><i>p. 110</i>&#160;<tt> </tt>
	In line 14, change &quot;<code>p&lt;array[N]</code>&quot;
	to &quot;<code>p&lt;&amp;array[N]</code>&quot;.
<dd><p>
<dt><i>p. 128</i>&#160;<tt> </tt>The statement following the union type syntax is 
	incorrect--ANSI C allows
<dd>unions to contain bit fields, although traditional C does
	not.&#160;<tt> </tt>Change the sentence to read:
<blockquote>
	&quot;The syntax for defining components is the same as 
	that used for structures.&#160;<tt> </tt>In traditional C, unions must 
	not contain bit fields, but in ANSI C this restriction 
	is removed.&quot;
</blockquote>
<dt><i>p. 163</i>&#160;<tt> </tt>	In line 7, change &quot;the promotion
	to float&quot; to &quot;the promotion to double&quot;.
<dd><p>
<dt><i>p. 169</i>&#160;<tt> </tt>	In the definition of 'primary-expression,'
	change 'name' to 'identifier'
<dd>	and change 'literal' to 'constant.'
<p>
<dt><i>p. 185</i>&#160;<tt> </tt>
	In the third paragraph, change
<dd>
	&quot;into its first argument a reversed copy of its second
	argument&quot;<br>
to<br>
	&quot;into its second argument a reversed copy of its first 
	argument&quot;.
<p>
<dt><i>p. 186</i>&#160;<tt> </tt>
	In the syntax for multiplicative-expression: change 
	&quot;cast-expression&quot; to
<dd>	&quot;unary-expression.&quot;
	Alternatively, make the changes discussed section 3.1 below.
<p>
<dt><i>p. 197</i>&#160;<tt> </tt>
	In the first line of the table at the bottom of the page,
	for a=1 and b=0,
<dd>	change the entry under &quot;<code>a||b</code>&quot; 
	from 0 to 1.&#160;<tt> </tt>[<code>(1||0)==1</code>]
<p>
<dt><i>p. 226</i>&#160;<tt> </tt>	In the <code>insertsort</code> example,
	add a declaration of <code>temp</code> by changing the
<dd>	existing declaration to read:
<pre>
	register int i, j, temp;
</pre>
<dt><i>p. 233</i>&#160;<tt> </tt>	In line four, change &quot;largest&quot;
	to &quot;smallest&quot;.
<dd><p>
<dt><i>p. 287</i>&#160;<tt> </tt>
	The example illustrating <code>strcpy</code> is incorrect 
	because it does not return
<dd>	the original value of the 
	argument <code>dest</code>.&#160;<tt> </tt>The corrected example is
	shown below:
<pre>
   #include &lt;string.h&gt;
   char *strcat(dest,src)
   	char *dest;
   	const char *src;
   {
   	char *s = dest + strlen(dest);  /* changed */
   	strcpy(s, src);
   	return dest;
   }
</pre>
<dt><i>p. 308</i>&#160;<tt> </tt>	In line 11, change
	&quot;<code>fputs</code>&quot; to &quot;<code>fgets</code>&quot;.
<dd><p>
<dt><i>p. 327</i>&#160;<tt> </tt>	In the prototype for ANSI <code>vsprintf</code>,
	change the third argument
<dd>
	from &quot;<code>char *arg</code>&quot; to &quot;<code>va_list
	arg</code>&quot;.
<p>
<dt><i>p. 328</i>&#160;<tt> </tt>	In line 4, the variable
	<code>global_trace_enabled</code> is never used; its
<dd>	declaration can be removed.
<p>
<dt><i>p. 335</i>&#160;<tt> </tt>	In line 1, the sentence should
	begin &quot;The function <code>relalloc</code> behaves like
<dd> 
	<code>realloc</code> except...&quot;.
<p>
<dt><i>p. 350</i>&#160;<tt> </tt>	In both prototypes for <code>system</code>,
	change &quot;<code>command</code>&quot; to
	&quot;<code>*command</code>&quot;.
<dd><p>
<dt><i>p. 364</i>&#160;<tt> </tt>The character for decimal code 58 is missing; it 
	should be a colon, ':'.
<dd><p>
<dt><i>p. 372</i>&#160;<tt> </tt>	Include the change made on p. 186 on this page also.
<dd><p>
<dt><i>p. 374</i>&#160;<tt> </tt>	Change the definition of 'primary-expression' as on p. 169.
</dl>

<h1>2&#160;<tt> </tt>Typographical Problems</h1>

The following spelling and typesetting problems have been 
noticed.

<dl>
<dt><i>p. v</i>&#160;<tt> </tt>In the Table of Contents, section 14.2:
	change &quot;<code>Memcmp</code>&quot;
	to &quot;<code>memcmp</code>&quot;.
<dd><p>
<dt><i>p. 12</i>&#160;<tt> </tt>	In the third line from the bottom,
	change &quot;/*&quot; to &quot;/*&quot; (font change).
<dd><p>
<dt><i>p. 13</i>&#160;<tt> </tt>	In the &quot;Token Parsing&quot; table
	footnote, change &quot;b, -, -, x&quot; to &quot;b, -, -,
	x&quot;
<dd>	(font change).
<dd><p>
<dt><i>p. 16</i>&#160;<tt> </tt>
	In the definition of constant, change floating-point-constant to
<dd>	floating-constant.
<p>
<dt><i>p. 19</i>&#160;<tt> </tt>In Table 2-1, first column, the constant
	<code>077777</code> is in the 
	wrong font.
<dd><p>
<dt><i>p. 32ff</i>&#160;<tt> </tt>All even page numbers in chapter 3 should be in 
	boldface.
<dd><p>
<dt><i>p. 34</i>&#160;<tt> </tt>In line 29, add a period after &quot;illegal&quot;.
<dd><p>
<dt><i>p. 50</i>&#160;<tt> </tt>
	In line 4, change &quot;name&quot; to &quot;name&quot; (font change).
<dd><p>
<dt><i>p. 53</i>&#160;<tt> </tt>
	In exercise 1, definitions (c) and (d) should be in 
	the program typeface.
<dd><p>
<dt><i>p. 82</i>&#160;<tt> </tt>
	In line 13, change &quot;ary&quot; to &quot;ary&quot; (font change).
<dd><p>
<dt><i>p. 87</i>&#160;<tt> </tt>
	In the second line from bottom, change &quot;element j 
	the array&quot; to &quot;element j
<dd>	of the array&quot;.
<p>
<dt><i>p. 119</i>&#160;<tt> </tt>	The heading on this page and the next four
	odd-numbered pages should
<dd>	be &quot;Sec. 5.6&#160;<tt> </tt>Structure Types.&quot;
<p>
<dt><i>p. 133</i>&#160;<tt> </tt>	The references at the end of section
	5.7.4 would be better placed at the end of
<dd>	section 5.7.3.
<p>
<dt><i>p. 161</i>&#160;<tt> </tt>	In the example code,
	change the characters `` and '' to &quot;.&#160;<tt> </tt>Also, the comment
<dd>	on the last line of the example should line up with the previous
	comments.
<p>
<dt><i>p. 162</i>&#160;<tt> </tt>	In footnote 1 of the table, change &quot;if
	and only it&quot; to &quot;if and only if it&quot;.
<dd><p>
<dt><i>p. 166</i>&#160;<tt> </tt>	In the title on the first table, change &quot;values&quot; to &quot;lvalues.&quot;
<dd><p>
<dt><i>p. 177</i>&#160;<tt> </tt>	In the references, change &quot;void
	type&quot; to &quot;<code>void</code> type&quot; (font
	change).
<dd>	This problem appears several times in the book, but this will be
	the only mention of it.
<p>
<dt><i>p. 178</i>&#160;<tt> </tt>	In line 7, change &quot;modified&quot; to
	&quot;modified&quot;.
<dd><p>
<dt><i>p. 184</i>&#160;<tt> </tt>	In the second line from the bottom,
	change 
	&quot;modified&quot; to &quot;modified&quot;.
<dd><p>
<dt><i>p. 191</i>&#160;<tt> </tt>	In the first line, remove the space before
	the period ending the sentence.
<dd>	At the end of the first paragraph, change &quot;the result of 
	applying the shift operators <code>&lt;&lt;</code> and
	<code>&gt;&gt;</code>&quot; to &quot;the result of 
	applying the shift operator <code>&gt;&gt;</code>&quot;.
<p>
<dt><i>p. 214</i>&#160;<tt> </tt>
	In line 6, change `&quot;do;&quot;;' to `&quot;do&quot;;'.
<dd><p>
<dt><i>p. 214</i>&#160;<tt> </tt>
	The sixth line from the bottom of the page is not 
	aligned properly with the
<dd>	other examples.
<p>
<dt><i>p. 233</i>&#160;<tt> </tt>	The eighth line from the bottom,
	<code>smallest = a[j]</code>, 
	should be indented
<dd>	under the <code>if</code> statement, or included on the
	same line with the <code>if</code> statement.
<p>
<dt><i>p. 241</i>&#160;<tt> </tt>	In line 13 and 18, the example prototypes for 
	<code>strncpy</code> and <code>fprintf</code> differ
<dd>	from the
	prototypes that actually appear in the ANSI C header
	files.&#160;<tt> </tt>See p. 287 and p. 316 for the true prototypes.
<p>
<dt><i>p. 251</i>&#160;<tt> </tt>	In line 27, change &quot;register&quot;
	to &quot;register&quot; (font change).
<dd><p>
<dt><i>p. 272</i>&#160;<tt> </tt>	In Table 11-3, in the entry for
	<code>frac_digit</code>, change 
	&quot;shwon&quot; to &quot;shown&quot;.
<dd><p>
<dt><i>p. 273</i>&#160;<tt> </tt>	In line 13, change &quot;Draft Proposed ANSI C&quot; to 
	&quot;ANSI C&quot;.
<dd><p>
<dt><i>p. 291</i>&#160;<tt> </tt>	In line 14 of the example program, change 
	&quot;woords&quot; to &quot;words&quot;.
<dd><p>
<dt><i>p. 292</i>&#160;<tt> </tt>	In line 3, change &quot;woords&quot; to &quot;words&quot;.
<dd><p>
<dt><i>p. 296</i>&#160;<tt> </tt>	In the prototype for ANSI <code>memchr</code>,
	change &quot;<code>size t</code>&quot; 
	to &quot;<code>size_t</code>&quot;.  
<dd><p>
<dt><i>p. 297</i>&#160;<tt> </tt>	In line 2 of section 14.2, change &quot;character&quot; to 
	&quot;characters&quot;.
<dd><p>
<dt><i>p. 300</i>&#160;<tt> </tt>	In last line, change &quot;file&quot; to &quot;files&quot;.
<dd><p>
<dt><i>p. 304</i>&#160;<tt> </tt>	In line 3 of sec. 15.4, change &quot;program.;&quot; to 
	&quot;program;&quot; and change &quot;stdout&quot;
<dd>	to &quot;<code>stdout</code>&quot;.
<p>
<dt><i>p. 308</i>&#160;<tt> </tt>	In line 12, change &quot;put into&quot;
	to &quot;put it into&quot;.
<dd><p>
<dt><i>p. 317</i>&#160;<tt> </tt>	In line 5 of sec. 15.11.2, change &quot;an&quot; to &quot;a&quot;.
<dd><p>
<dt><i>p. 318</i>&#160;<tt> </tt>	In line 2 of sec. 15.11.3, eliminate the space 
	before the period ending the line.
<dd><p>
<dt><i>p. 320</i>&#160;<tt> </tt>	In line 12 of sec. 15.11.6, change &quot;L&quot; to &quot;L&quot; 
	(font change).
<dd><p>
<dt><i>p. 329</i>&#160;<tt> </tt>	In line 1 of sec. 15.14, change &quot;takes takes&quot; 
	to &quot;takes&quot;.
<dd><p>
<dt><i>p. 330</i>&#160;<tt> </tt>	In line 2 of sec. 15.15, change &quot;filename&quot; to 
	&quot;filename&quot; (font change).
<dd><p>
<dt><i>p. 330</i>&#160;<tt> </tt>	In line 1 of sec. 15.16, change &quot;A&quot; to &quot;A&quot; 
	(font change).
<dd><p>
<dt><i>p. 344</i>&#160;<tt> </tt>	In line 7 of sec. 18.2, change &quot;time&quot; to &quot;time&quot; 
	(font change).
<dd><p>
<dt><i>p. 345</i>&#160;<tt> </tt>In line -3, change &quot;daving dime&quot;
	to &quot;saving time&quot;.
<dd><p>
<dt><i>p. 352</i>&#160;<tt> </tt>	In line 3, change &quot;steams&quot; to &quot;streams&quot; (twice).
<dd><p>
<dt><i>p. 358</i>&#160;<tt> </tt>	In line 2, the sentence should begin
<dd>
	&quot;The function <code>main</code>, which programmers must
	define to establish an entry point in their C programs,
	is also described...&quot;.
<p>
<dt><i>p. 367</i>&#160;<tt> </tt>	In the definition of constant,
	change floating-point-constant to
<dd>	floating-constant.
<p>
<dt><i>p. 373</i>&#160;<tt> </tt>	In the definition of pointer, the section
	numbers should be flush right.
</dl>

<h1>3&#160;<tt> </tt>Comments</h1>

The following comments may clarify certain parts of the book.

<h2>3.1&#160;<tt> </tt>The cast-expression Syntax</h2>

The syntax for  unary-expression and cast-expression in C:ARM 
(p. 179) differs from ANSI C.&#160;<tt> </tt>Either can be used to describe 
C, but the <a href="ANSI-C-grammar-y.html">ANSI grammar</a> is probably
clearer.&#160;<tt> </tt>Here are the changes that bring C:ARM into line
with the ANSI C grammar, and the pages on which they could be made.
<pre>
   multiplicative-expression:	           <i>p. 186, 372</i>
           cast-expression
           multiplicative-expression  mult-op  cast-expression
   
   cast-expression:	                   <i>p. 179, 366</i>
           unary-expression
           ( type-name ) cast-expression
   
   unary-expression:	                   <i>p. 179, 377</i>
           postfix-expression
           sizeof-expression
           unary-minus-expression
           unary-plus-expression
           logical-negation-expression
           bitwise-negation-expression
           address-expression
           indirection-expression
           preincrement-expression
           predecrement-expression
   
   unary-minus-expression:	           <i>p. 181, 377</i>
           - cast-expression
   
   unary-plus-expression:	           <i>p. 181, 377</i>
           + cast-expression
   
   logical-negation-expression:	           <i>p. 182, 372</i>
           ! cast-expression
   
   bitwise-negation-expression:	           <i>p. 182, 366</i>
           ~ cast-expression
   
   address-expression:	                   <i>p. 183, 365</i>
           &amp; cast-expression
   
   indirection-expression:	           <i>p. 184, 371</i>
           * cast-expression
</pre>
<h2>3.2&#160;<tt> </tt>Declaration-list Syntax</h2>

On p. 215, the syntax for declaration-list is written in a 
right-associative style whereas all other similar grammatical 
productions are left-associative (such as statement-list, 
immediately following).&#160;<tt> </tt>To be consistent, it should be 
written as 
<pre>
   declaration-list :
            declaration
            declaration-list  declaration
</pre>

<h2>3.3&#160;<tt> </tt>Miscellaneous Clarifications</h2>
<dl>
<dt><i>p. 56</i>&#160;<tt> </tt>	The syntax for type specifiers in the book
	differs from that found in
<dd>	other C books, although the result should be 
	the same.&#160;<tt> </tt>We state that only one type specifier can appear 
	in a declaration, but we also consider &quot;<code>unsigned
	long</code>&quot; and &quot;<code>unsigned long int</code>&quot;
	to be distinct specifiers (p. 101).&#160;<tt> </tt>Other books
	restrict type specifiers to be single tokens, and then
	permit multiple type specifiers to appear
	in declarations, with some constraints (e.g., see the ANSI 
	standard, section 3.5.2).&#160;<tt> </tt>When using our multi-token 
	specifiers, the individual tokens need not be adjacent 
	in the declaration, nor do they have to be in the listed 
	order.&#160;<tt> </tt>Of course, it is better style to keep them together 
	and in order.
<p>
<dt><i>p. 167</i>&#160;<tt> </tt>	In Table 7-1, the precedence of postfix
	<code>++</code> and <code>--</code> should be 17 to
<dd>	emphasize their symmetry with the other postfix operators.&#160;<tt> </tt>This
	is not a change in the semantics.
<p>
<dt><i>p. 359</i>&#160;<tt> </tt>	In the description of <code>argv</code>
	and <code>argc</code>, it should be mentioned that
<dd>	ANSI C requires <code>argv[argc]</code> to be <code>NULL</code>.
</dl>
<hr>
Sam Harbison <br>
Pine Creek Software; Suite 300; 305 South Craig Street; Pittsburgh,
PA 15213;<br>
USA. Phone&amp;FAX: +1 412 681 9811. E-mail: harbison@bert.pinecreek.com.<br>
</body>
</html>
