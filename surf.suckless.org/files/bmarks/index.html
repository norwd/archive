<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>surf | suckless.org software that sucks less</title>
	<link rel="stylesheet" type="text/css" href="https://suckless.org/pub/style.css"/>
</head>

<div id="header">
	<a href="https://suckless.org/"><img src="https://suckless.org/logo.svg" alt=""/></a>&nbsp;
	<a id="headerLink" href="https://suckless.org/">suckless.org</a>
	<span class="hidden"> - </span>
	<span id="headerSubtitle">surf</span>
</div>
<hr class="hidden"/>
<div id="menu">
	<a href="https://suckless.org/">home</a>
	<a href="https://dwm.suckless.org/">dwm</a>
	<a href="https://st.suckless.org/">st</a>
	<a href="https://core.suckless.org/">core</a>
	<a href="../../index.html"><b>surf</b></a>
	<a href="https://tools.suckless.org/">tools</a>
	<a href="https://libs.suckless.org/">libs</a>
	<a href="https://ev.suckless.org/">e.V.</a>
	<span class="right">
		<a href="https://dl.suckless.org/">download</a>
		<a href="https://git.suckless.org/">source</a>
	</span>
</div>
<hr class="hidden"/>
<div id="content">
<div id="nav">
	<ul>
	<li><a href="../../index.html">about</a></li>
	<li><a href="../index.html"><b>files/</b></a>
		<ul>
		<li><a href="../adblock-hosts/index.html">adblock hosts/</a></li>
		<li><a href="../autologin/index.html">autologin/</a></li>
		<li><a href="../autorefresh/index.html">autorefresh/</a></li>
		<li><a href="index.html"><b>bmarks/</b></a></li>
		<li><a href="../bmarks_history/index.html">bmarks history/</a></li>
		<li><a href="../easier_key/index.html">easier key/</a></li>
		<li><a href="../easy_links/index.html">easy links/</a></li>
		<li><a href="../edit_source/index.html">edit source/</a></li>
		<li><a href="../feeds/index.html">feeds/</a></li>
		<li><a href="../hide_applets/index.html">hide applets/</a></li>
		<li><a href="../kiosk_mode/index.html">kiosk mode/</a></li>
		<li><a href="../link_hints/index.html">link hints/</a></li>
		<li><a href="../middle_click_link/index.html">middle click link/</a></li>
		<li><a href="../not_flash/index.html">not flash/</a></li>
		<li><a href="../quick_search/index.html">quick search/</a></li>
		<li><a href="../simple_bookmarking/index.html">simple bookmarking/</a></li>
		<li><a href="../simple_bookmarking_redux/index.html">simple bookmarking redux/</a></li>
		<li><a href="../simplyread/index.html">simplyread/</a></li>
		<li><a href="../smartdownloads/index.html">smartdownloads/</a></li>
		<li><a href="../surfraw_as_searchengine/index.html">surfraw as searchengine/</a></li>
		<li><a href="../untarget/index.html">untarget/</a></li>
		</ul>
	</li>
	<li><a href="../../patches/index.html">patches/</a></li>
	<li><a href="../../screenshots/index.html">screenshots/</a></li>
	<li><a href="../../stylesheets/index.html">stylesheets/</a></li>
	</ul>
</div>
<hr class="hidden"/>
<div id="main">

<h1>Bookmarks for surf</h1>
<h2>Description</h2>
<p>This script enables bookmarks and url handlers for surf.</p>
<h2>Keybindings</h2>
<pre><code>^b (bookmark current url with given tags)
^g (open url with bookmark autocompletion)
^G (open url without bookmark autocompletion)
</code></pre>
<h2>URL handlers</h2>
<pre><code>This script implements several url handlers
"d " (bookmark current url in delicious)
"t " (create tinyurl from current page)
"w word .." (lookup word in wikipedia)
"g word .." (google for given word)
"y word .." (search in youtube)
</code></pre>
<h2>Author</h2>
<ul>
<li>The code was originally from Peter John Hartman, but hardly simplified by pancake and nibble.</li>
</ul>
<h2>Installation</h2>
<p>Copy the following code into a shellscript named 'surf.sh' in $PATH. Edit config.h according to the rules explained in header.</p>
<h2>Code</h2>
<pre><code>#!/bin/sh
# $1 = $xid
# $2 = $p = _SURF_FIND _SURF_BMARK _SURF_URI _SURF_URI_RAW (what SETPROP sets in config.h)
#
# // replace default setprop with this one
# #define SETPROP(p) { .v = (char *[]){ "/bin/sh", "-c", "surf.sh $0 $1", winid, p, NULL } }
#
# // fix shift+slash keybinding in spanish keyboard (f.example)
# { MODKEY,               GDK_g,      spawn,      SETPROP("_SURF_URI") },
# { MODKEY|GDK_SHIFT_MASK,GDK_g,      spawn,      SETPROP("_SURF_URI_RAW") },
# { MODKEY,               GDK_f,      spawn,      SETPROP("_SURF_FIND") },
# { MODKEY,               GDK_b,      spawn,      SETPROP("_SURF_BMARK") },
</code></pre>
<pre><code>font='-*-terminus-medium-*-*-*-*-*-*-*-*-*-*-*'
normbgcolor='#181818'
normfgcolor='#e9e9e9'
selbgcolor='#dd6003'
selfgcolor='#e9e9e9'
bmarks=~/.surf/bookmarks.txt
</code></pre>
<pre><code>xid=$1
p=$2
uri=`xprop -id $xid _SURF_URI | cut -d '"' -f 2`
kw=`xprop -id $xid _SURF_FIND | cut -d '"' -f 2`
dmenu="dmenu -fn $font -nb $normbgcolor -nf $normfgcolor \
	   -sb $selbgcolor -sf $selfgcolor"
</code></pre>
<pre><code>s_xprop() {
	[ -n "$2" ] &amp;&amp; xprop -id $xid -f $1 8s -set $1 "$2"
}
</code></pre>
<pre><code>case "$p" in
"_SURF_FIND")
	ret="`echo $kw | $dmenu -p find:`"
	s_xprop _SURF_FIND "$ret"
	;;
"_SURF_BMARK")
	grep "$uri" $bmarks &gt;/dev/null 2&gt;&amp;1 || echo "$uri" &gt;&gt; $bmarks
	;;
"_SURF_URI_RAW")
	ret=`echo $uri | $dmenu -p "uri:"`
	s_xprop _SURF_GO "$ret"
	;;
"_SURF_URI")
	sel=`tac $bmarks 2&gt; /dev/null | $dmenu -p "uri [dgtwy*]:"`
	[ -z "$sel" ] &amp;&amp; exit
	opt=$(echo $sel | cut -d ' ' -f 1)
	arg=$(echo $sel | cut -d ' ' -f 2-)
	case "$opt" in
	"d") # del.icio.us
		ret="http://del.icio.us/save?url=$uri"
		;;
	"g") # google for it
		ret="http://www.google.com/search?q=$arg"
		;;
	"t") # tinyurl
		ret="http://tinyurl.com/create.php?url=$uri"
		;;
	"w") # wikipedia
		ret="http://wikipedia.org/wiki/$arg"
		;;
	"y") # youtube
		ret="http://www.youtube.com/results?search_query=$arg&amp;aq=f"
		;;
	*)
		ret="$sel"
		;;
	esac
	s_xprop _SURF_GO "$ret"
	;;
*)
	echo Unknown xprop
	;;
esac
</code></pre>
</div>

</div>

</html>
