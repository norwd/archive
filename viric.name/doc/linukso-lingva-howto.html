<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>Kiel uzi Katalunan + Hispanan + Rusan + Esperantan en Linuksa
komputilsistemo?
</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<!-- Code:
font-family: fixed,monospace,courier;font-size: 0.8em;border:1px black
solid;line-height:25px;
-->
</head>

<body>

<h1 align=center>Kiel uzi Katalunan + Hispanan + Rusan + Esperantan en
Linuksa komputilsistemo?</h1>

<h1>1. Enhavo</h1>
<ol>
<li>Enhavo
<li>Celoj
<li>Enkonduko al la problemo
	<ol>
	<li>Mia propra sperto
	<li>Literkodoj krom <em>latin1</em>
	<li>Nura nuna solvo: Unikodo
	<li>Nuntempa uzado de literkodoj
	</ol>
<li>Montri literojn ne-latin1-ajn: tiparoj
<li>Naciaj agordoj, aŭ programoj en nacia lingvo: "Locale"
	<ol>
	<li>Kia estas nuna nacia agordo?
	<li>Kiel atingi unikodan naciagordon?
	</ol>
<li>Kiel tajpi neanglajn literojn
<li>Programoj
	<ol>
	<li>X-terminalo: <tt>xterm</tt>
	<li>Kodotekoj por terminalaj programoj
	<li><tt>Mutt</tt>, mia retpoŝtilo
	<li><tt>Vim</tt>, mia redaktilo
	</ol>
<li>Ne pretaj artikoloj
<li>Pri tiu ĉi dokumento
</ol>


<h1>2. Celoj</h1>

<p>
Mi celas ebligi la uzon de katalunaj literoj, esperantaj literoj kaj rusaj
literoj en preskaŭ la plena X sistemo, kaj ankaŭ en terminalaj programoj. Pli
ekzakte, mi celas uzi tiajn literojn en X programoj kiuj subtenas unikodon,
retpoŝtilo <tt>mutt</tt>, kaj redaktilo <tt>vim</tt> (kompreneble ankaŭ
<tt>gvim</tt>, kiel X programo).
</p>

<blockquote>
La katalunaj literoj estas: <strong>
a b c ç d e f g h i j k l m n o p q r s t u v w x y z
</strong>
</blockquote>
<blockquote>
La hispanaj literoj estas: <strong>
a b c d e f g h i j k l m n ñ o p q r s t u v w x y z
</strong>
</blockquote>

<blockquote>
La esperantaj literoj estas: <strong>
a b c ĉ d e f g ĝ h ĥ i j ĵ k l m n o p q r s ŝ t u ŭ v z
</strong>
</blockquote>

<blockquote>
La rusaj literoj estas: <strong>
а б в г д е ё ж з и й к л м н о п р с т у ф х ц ч ш щ ъ ы ь э ю я
</strong>
</blockquote>


<h1>3. Enkonduko al la problemo</h1>

<h2>3.1. Mia propra sperto</h2>
<p>
Dum jaroj 2003/2004 mi eklernis novajn fremdajn lingvojn krom la anglan.Mi
denaske scipovas la katalunan, kaj dum mia infaneco mi lernis la hispanan. Kiam
mi estis dekunujara, mi eklernis la anglan. Kaj nun, kiam mi estas dudekdu, mi
lernas la esperantan kaj la rusan. Mi neniam antaŭe havis problemojn por skribi
per miaj konataj lingvoj ĉe komputilo: Katalunan, Hispanan kaj Anglan eblas
skribi per la sama literkodo: la tre konata <em>iso-8859-1</em>, aŭ alimaniere
<em>latin1</em>.
</p>


<h2>3.2. Literkodoj krom <em>latin1</em></h2>
<p>
Nun nova mondo malkovriĝis antaŭ mi: literkodoj kaj por la rusa kaj por la
esperanta. Ruse oni plej kutime skribas per: <em>KOI8-R</em> aŭ
<em>win-1251</em> (tiu ĉi lasta preskaŭ nur en vindozaj komputilsistemoj).
Esperante oni skribas per <em>latin3</em> (a.k.k. <em>iso-8859-3</em>), aŭ rekte
sen uzi la esperantajn ĉapelitajn literojn, sed anstataŭigi ilin per <em>x</em>,
<em>h</em> aŭ <em>'</em> sistemo (per po du latinaj literoj por ĉapellitero).
</p>

<h2>3.3. Nura nuna solvo: Unikodo</h2>
<p>
Ekde kelkaj jaroj ekzistas novaj literkodoj, ne limigataj pro 1-bajto
interna komputila reprezento de literoj.
Tiel, tiuj literkodoj enhavas pli ol 256 literojn
malsimilajn. Ekzistas pluraj unikodaj literkodoj. La plej uzatas estas UTF-8. Mi
celis atingi la uzon de UTF-8.
</p>

<h2>3.4. Nuntempa uzado de literkodoj</h2>
<p>
Nuntempe neniu zorgas pri literkodoj en siaj programoj, ĉar oni ĉiam uzas
kodotekojn, kiuj ja zorgas pri tiuj aferoj. Ĉe konzolo oni povas programi per la
kodoteko "ncursesw", kaj ĉe X-sistemo per QT, GTK, ktp...
</p>

<p>
La X-sistemo mem zorgas pri rilato inter klavoj kaj literoj. Ĝi havas proprajn
kodojn por ĉiuj eblaj literoj. Do, se programo subtenas KOI8-R literoj, ĝi povas
bone funkcii sub la X-sistemo, ĉar la X-sistemo jam havas propran kodon por
ebligi tajpi ĉiujn literojn.
</p>

<blockquote>
<strong>Noteto:</strong> Mi ne certas pri tio... sed ŝajnas ke tio
tiel rulas.
</blockquote>

<h1>4. Montri literojn ne-<em>latin1</em>-ajn: tiparoj</h1>

<p>
Tio, kio rilatigas literkodon kun montrotaj literoj, estas tiparo. Do, se oni
volas uzi fine UTF-8 en X-sistemo, oni devas havi tiparojn UTF-8.
La ISO-a nomo de
tiu literkodo estas <em>iso-10646-1</em>. Por scii ĉu via X-sistemo havas
<a name="xlsfonts">tiajn tiparojn</a>, skribu en X-terminalo:
</p>
<pre>
xlsfonts | grep iso10646-1
</pre>

<p>
Se vi havas ilin, daŭrigu la legadon de tiu ĉi dokumento. Se ne, bonvolu legi
alian <em>how-to</em> pri instali unikodajn tiparojn ĉe vian X-sistemon.
<!-- Ligiloj! *** -->
</p>

<h1>5. Naciaj agordoj, aŭ programoj en nacia lingvo: "Locale"</h1>

<h2>5.1. Kia estas nuna nacia agordo?</h2>

<p>
Multaj nuntempaj programoj scias kiun literkodon uzi, per agordoj
<em>locale</em>. Ni scios kiun naciagordon ni havas tajpante tion en
X-terminalo:
</p>

<pre>
echo $LANG
</pre>

<p>Ekzemple, tiu ordono eble donos al ni <code>ca_ES.ISO-8859-1</code>. Tio
signifas:</p>
<dl>
<dt>Lingvo
<dd><tt>ca</tt>: Kataluna. La programoj montras mesaĝojn per tiu lingvo.
<dt>Lando
<dd><tt>ES</tt>: Hispanio. La programoj scias pri tiuj landaj aferoj (mono,
	datoj, ktp.)
<dt>Literkodo
<dd><tt>ISO-8859-1</tt>: a.k.k <em>latin1</em>. Eble tio aperas kiel
	<tt>iso88591</tt>. Tiun literkodon programoj uzos por montri/akiri
	mesaĝojn.
</dl>

En iuj sistemoj respondojn tiajn, kiaj nur <tt>ca_ES</tt>, ni akiros. Tio okazas
pro antaŭsupozaĵoj en dosiero <tt>/usr/share/locale/locale.alias</tt>. Tie, oni
ligas <tt>ca_ES</tt> kun <tt>ca_ES.ISO-8859-1</tt> (aŭ alia literkodo,
kompreneble). Se la literkodo montrita estas "utf8", aŭ "UTF-8", ĉio jam bonas,
kaj vi povas preterpasi la venontan eksplikadon.

<h2>5.2. Kiel atingi unikodan naciagordon?</h2>

<p>
Ni devas unikodigi niajn naciajn agordojn. T.e. ŝanĝi la literkodon de nia nacia
agordo. Laŭ la antaŭa ekzemplo, ni devus ŝanĝi tiun <tt>ca_ES.ISO-8859-1</tt> al
<tt>ca_ES.UTF-8</tt>.
</p>

<p>
Unue, ni devas certiĝi pri ĉu nia naciagorda sistemo enhavas nian naciajn
agordojn unikodajn. Ni povas peti tion serĉante ilin per:
</p>

<pre>
locale -a | grep "ca_ES\.UTF-8"
</pre>

<p>Se ni havas tion, ni nur devas ordoni al nia sistemo ĉiam uzi ĝin. Se ne, ni
devas krei ilin per ordono (ordonota per uzanto <tt>root</tt>):
</p>
<pre>
localedef -f UTF-8 -i ca_ES ca_ES.UTF-8
</pre>

<p> Post havi tiujn dosierojn unikodigitajn, ni devas ŝanĝi
startdosierojn, por ke ili agordu tiun nacian unikodan <em>locale</em>. Ni devas
ŝanĝi linion similan al: </p> <pre> export LANG="ca_ES.ISO-8859-1" </pre> <p>kaj
ŝanĝi ĝin al:</p> <pre> export LANG="ca_ES.UTF-8" </pre>

<p>
Fine, ni bezonas havi naciagordon agorditan kun literkodon "UTF-8". Aliekzemple,
rusoj devus havi literkodon <tt>ru_RU.UTF-8</tt>.
</p>

<blockquote>
<strong>Nun, niaj iksaj programoj jam bone devus montri unikode!</strong>
</blockquote>

<h1>6. Kiel tajpi neanglajn literojn</h1>

<p>
Mi nuntempe uzas programitan X11 de
<a href="http://www.xfree86.org/">Xfree86</a>, versio 4.3.0. Oni normale elektas
nuran lingvon de klavaro (almenaŭ en Katalunio), ĉar per la hispana klavaro oni
povas tajpi kaj per la kataluna, kaj per la hispana, kaj per la angla. Do, mi
antaŭe uzis nur <tt>es</tt>-an klavaron.
</p>

<p>
Nuntempe, mi bezonas modifitan hispanan klavaron (por tajpi esperantajn
literojn), kaj ankaŭ rusan. La X-sistemo, kiun mi uzas, tenas du klavarojn
samtempe uzeblajn (normala kaj alternativa). Do laŭ tio, kion mi vidis en aliaj
dokumentoj tiaj, oni normale elektas la usonan kiel unua tajpolingvo kaj la
nelatinan (rusan, ekzemple) kiel dua. Oni povas ŝanĝi inter tiuj du tajpolingvoj
per elektita speciala klavo. Aŭ eĉ oni povas tajpi alialfabetajn literojn
samptempe premante alian specialan klavon: ALT-GR (hispane, t.e. alternativaj
grafikaĵoj).
</p>

<p>
En normalaj hispanaj hejmoj, oni uzas la alternativan klavaron por tajpi
malmultajn specialajn signojn,
kiel <tt>{}</tt>, <tt>[]</tt>, kaj eĉ la Eŭran signon €.
Kompreneble, antaŭ skribi ruse per komputilo mi uzis tiun alternativan klavaron
por tajpi la ĉapelitajn literojn: <strong>ĉ ĥ ĵ ŝ ŭ</strong>. Mi agordis mian
klavarsistemon por tajpi ilin uzante klavon ALT-GR samtempe kun <strong>c h j s
</strong> kaj <strong>u</strong>.
</p>

<p>
Do jen la problemo! Mi ne povis uzi la rusan kiel alternativa klavaro. La nura
solvo estis ŝanĝi rultempe la klavarsistemon. Mi skribis recepton por ŝanĝi la
klavarsistemon al "es+eo", kaj alian recepton por ŝanĝi al "en+ru". Nur mankis
al mi ilo por ruligi tiujn receptojn per specialaj klavoj. La nomo de tiu
programo estas <tt><a href="http://hocwp.free.fr/xbindkeys/">xbindkeys</a></tt>.
</p>

<p>
Nu, ĝis nun mi ĉion ŝanĝis sen tuŝi la ĉefan agordodosieron de XFree86 4.3.0.
Tie oni nur elektas la unuan agordon kiun oni trovos ĵus post ruligi la sistemon
X. Fakte, la receptoj modifas la agordojn pri la klavaro, kiujn kompreneble oni
devas elekti en la ĉefa agordodosiero de la sistemo X.
</p>

<p>
Nur gravas la klavara sekcio de tiu agordodosiero
(<tt>/etc/X11/XF86Config-4</tt> ĉe mi). Jen la enhavo, kiun mi uzas, de tiu
sekcio. Rigardu ke mi nek agordas du klavarojn. Oni ne povas elekti kiel tajpi
la esperantajn specialajn literojn per tiu dosiero.
</p>

<pre>
Section "InputDevice"
        Identifier  "Keyboard0"
        Driver      "keyboard"
        Option      "XkbRules" "xfree86"
        Option      "XkbRules" "xfree86"
        Option      "XkbModel" "pc104"
        Option      "XkbLayout" "es"
EndSection
</pre>

<p>
Vi vidas ke nenion ĝi montras pri esperanto aŭ rusa lingvo. Nu, ĵus post ruligi
la sistemon X, ni devas agordi la specialajn klavojn por tajpi ĉapelajn
literojn.
Mi faras tion per <tt>xmodmap</tt>, ilo de X kiu eblas ŝanĝi literojn de
klavojn.
Mi havas en mia hejma dosierujo la dosieron por <tt>xmodmap</tt>, nomigita
<tt>.Xmodmap</tt> (vidu la punkton: kaŝita dosiero), kun jena enhavo:
</p>
<pre>
keycode 54 = C NoSymbol ccircumflex
keycode 42 = G NoSymbol gcircumflex
keycode 43 = H NoSymbol hcircumflex
keycode 44 = J NoSymbol jcircumflex
keycode 39 = S NoSymbol scircumflex
keycode 30 = U NoSymbol ubreve
</pre>

<p>
Tiu sola dosiero ne taŭĝas. Ni devas ruligi <tt>xmodmap</tt> por agordi laŭ tiu
enhavo de la dosiero. Mi faras tion per hejma dosiero <tt>.xinitrc</tt>
(hejma startodosiero de mia sistemo X), kun jena enhavo:
</p>
<pre>
#!/bin/bash

# Tio agordas kelkajn aferojn de iksaj programoj.
xrdb -merge /home/viric/.Xresources

# Linio pri xmodmap
xmodmap ~/.Xmodmap

# Tio ebligos min sxangxi per specialaj klavoj la klavarsistemojn.
xbindkeys

# Jen mia fenestrilo
exec wmaker
</pre>

<p>
Vi jam vidis ke tie mi ruligas ankaŭ <tt>xbindkeys</tt>. Tiu estas la programo
kiu ruligos la eblecon ŝanĝi klavarsistemon per specialaj klavoj. Ni devas
agordi tiun programon per nova dosiero: <tt>~/.xbindkeysrc</tt>. Jen la enhavo:
</p>
<pre>
"setxkb-es"
  shift + c:115

"setxkb-ru"
  shift + c:116
</pre>

<p>
Tie estas du programoj, nomitaj <tt>setxkb-es</tt> kaj <tt>setxkb-ru</tt>. La
unua igas hispanan klavaron kun esperantaj ĉapelitaj literoj. La alia, igas
rusan klavaron. Fakte, la dua igas rusan kun angla. Sciu, ke la unua recepto
igas hispanan klavaron kiel ĉefa, kaj la dua recepto igas la rusan ĉefa, kaj la
usonan kiel alternativa klavaro. Mi ruligas la unuan recepton per "maldekstra
majuskla + maldekstra vindoza klavoj", kaj la duan per "dekstra majuskla +
dekstra vindoza klavoj".
</p>

<p>
Tiuj receptoj devas esti en serĉvojo, ĉar mi menciis neniun dosierujon. La
enhavo de <tt>setxkb-es</tt> estas:
</p>
<pre>
#!/bin/bash
setxkbmap -layout es
setxkbmap -model pc104
xmodmap ~/.Xmodmap
</pre>

<p>
Kaj la enhavo de <tt>setxkb-ru</tt> estas:
</p>
<pre>
#!/bin/bash
setxkbmap -layout ru,us
setxkbmap -model pc104
setxkbmap -option grp:shift_toggle
</pre>

En la lasta dosiero mi agordas novan specialan klavon, por ŝanĝi inter la ĉefa
kaj la alternativa klavaroj (<tt>ru</tt>, <tt>us</tt>). Tiel, se iam
<tt>xbindkeys</tt> malfunkcias, ni ankoraŭ povos skribi latine.

<h1>7. Programoj</h1>

<h2>7.1. X-terminalo: <tt>xterm</tt></h2>

<p>
Mi uzas <tt>xterm</tt>, ĉar preskaŭ ĉiuj
havas ĝin (do des pli bone lerni uzi ĝin ol alia), kaj ĝi bone subtenas
unikodon. Por uzi <tt>xterm</tt> unikode, ni devas ruligi ĝin dirante kiun
tiparon uzi, kaj ordonante uzi unikodon. Tio estas:
</p>

<pre>
xterm -u8 -font '-misc-fixed-medium-r-normal--14-130-75-75-c-70-iso10646-1'
</pre>

Kompreneble, ni povas uzi iun ajn unikodan tiparon (<em>iso10646-1</em>). Mi
plej ŝatas tiun ekzemple montritan. Oni povas scii kiujn unikodajn tiparojn
eblas uzi per ordono montrita <a href="linukso-lingva-howto.html#xlsfonts">antaŭe</a>.

<h3>7.1.1. Kio ene okazas?</h3>

<p>
<tt>xterm</tt> devas subteni unikodon, por bone montri literojn. Tamen,
<tt>xterm</tt> ruligas <tt>bash</tt>. Ankaŭ <tt>bash</tt> devas kompreni
unikodon (ĉar ĝi legos niajn ordonojn unikode). Se nia naciagordo estas unikoda,
<tt>bash</tt> bone rolos. Do ni devas havi bone agorditan naciagordojn antaŭ
ruligi <tt>bash</tt>. T.e. antaŭ ruligi <tt>xterm</tt>. Se oni forgesas tion,
<tt>bash</tt> ne bone rolos, ĉefe forviŝante literojn.

</p>

<h2>7.2. Kodotekoj por terminalaj programoj</h2>

Ekzistas du versioj de konata kodoteko
<a href="http://www.gnu.org/software/ncurses/ncurses.html"><tt>ncurses</a></tt>.
La normala, kaj la unikoda (<em>wide-char</em>, dosiere konata kiel
<tt>ncursesw</tt>, enhavata en la normala distribuo de la kodoteko. Preskaŭ ĉiuj
programoj terminalaj uzas <tt>ncurses</tt>, sed kelkajn oni povas kompili
uzigante <tt>ncursesw</tt>, aŭ alia tute malsimila nomita
<a href="http://space.mit.edu/~davis/slang/"><tt>slang</tt></a>. 
 

<h2>7.3. <tt>Mutt</tt>, mia retpoŝtilo</h2>

Mi ekde pluraj jaroj uzas <a href="http://www.mutt.org"><tt>mutt</tt></a> kiel
retpoŝtilo, ĉar mi ankoraŭ ne trovis alian pli bonan.
Do, mi multege hezitis ĉu ŝanĝi la
retpoŝtilon kiam mi ankoraŭ ne atingis ties unikodan agordon. Fine, mi pli multe
zorgis pri unikodigi mian <tt>mutt</tt> ol frue ricevi bone miajn nelatinajn
retleterojn.

Nu, oni devas kompili <tt>mutt</tt> havante kodotekon <tt>ncursesw</tt>. Tiel,
<tt>mutt</tt> bonege funkcios. Mutt ne devas uzi <tt>slang</tt>. Sciu ke
<a href="http://www.gentoo.org">Gentoo linux</a> igas kompili <tt>mutt</tt>
uzigante <tt>slang</tt> (almenaŭ kiam mi skribas tiun ĉi artikolon).

<h2>7.4. <tt>Vim</tt>, mia redaktilo</h2>

Mi lernis uzi <a href="http://www.vim.org"><tt>vim</tt></a> ankaŭ antaŭ pluraj
jaroj, kaj mi nur scipovas skribi per vi-aj redaktiloj. Mi ja rapide skribas per
ili, sed mi iĝis misskribanto por aliaj redaktiloj. Mi imagas, ke tio ĉiam
okazas al uzantoj de vi-aj.

Oni povas uzi rekte <tt>gvim</tt> (ĝi uzas kodotekon GTK, tial ne havas
problemojn unikode). Se iu ŝatas uzi <tt>vim</tt> en iksaj terminaloj, tiu devas
kompili vim tra kodoteko <tt>ncurses</tt> (ne <tt>ncursesw</tt>!). Mi mem ne
provis kompili ĝin tra <tt>ncursesw</tt>, sed multaj diras ke ĝi tiel
misfunkcias.
Mi ne provis tion ankaŭ pro ke <tt>vim</tt> ja bonege funkcias unikode tra
kodoteko <tt>ncurses</tt> ĉe mi.

<h3>7.4.1 Kiel elekti literkodon por dosiero</h3>

Oni povas uzi <tt>vim</tt>-konzolan ordonon ekzemple:
<code>:set fileencoding=koi8r</code>.
Ankaŭ oni povas rekte diri al <tt>vim</tt> la literkodon de malfermota dosiero
denove per konzola ordono ekzemple: <code>:e dosiero ++enc=latin3</code>. Por
pli da informo, bonvolu rigardi <tt>vim</tt>-an helpan paĝon pri tiuj ordonoj
(<tt>fileencoding</tt> kaj <tt>++opt</tt>).

Vim ene ĉiam rolos unikode, sed tradukos literkodojn konservante kaj
malfermitante dosierojn.
<!-- Mi ne sxatas tiun vorton -->

<h1>8. Ne pretaj artikoloj</h1>
<ul>
<li>Kiel instali <tt>ncursesw</tt>.
<li>Kiel instali unikodajn tiparojn.
</ul>

<h1>9. Pri tiu ĉi dokumento</h1>

Mi skribis ĝin ĉar mi multe laboris por trovi solvon al tiu unikoda problemo.
Eble ekzistas antaŭaj dokumentoj, kiujn mi ne legis malgraŭ serĉi,
kaj solvas ankaŭ tion, sed mi ne trovis ilin kiam mi serĉis.

Nu, bonvolu skribi rekte al mi se iu volas aldoni ion al tiu ĉi dokumento. Mi
ankoraŭ ne tro regas la esperantan, nek scias ĉu mi bone rakontis ĉion en tiu
ĉi informilo. Tial mi certas ke la dokumento estas ege plibonigebla. Do ne
zorgu skribi al mi por ia demando aŭ konsilo.

<hr>
<address><a href="http://vicerveza.homeunix.net/~viric/">Lluís Batlle i
Rossell</a>, retpoŝto lluis ĉe vicerveza.homeunix.net, 12/06/2004</address>

</html>
