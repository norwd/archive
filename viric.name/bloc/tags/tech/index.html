<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>tech</title>

<link rel="stylesheet" href="../../style.css" type="text/css" />

<link rel="stylesheet" href="../../local.css" type="text/css" />


<link rel="alternate" type="application/x-wiki" title="Edit this page" href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=tags%2Ftech&amp;do=edit" />

<link rel="alternate" type="application/rss+xml" title="viricbloc (RSS)" href="index.rss" /><link rel="alternate" type="application/atom+xml" title="viricbloc (Atom)" href="index.atom" />


</head>
<body>

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="../../index.html">viricbloc</a>/ 

<a href="../index.html">tags</a>/ 

</span>
<span class="title">
tech

</span>
</span><!--.header-->

</div>


<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=tags%2Ftech&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="../../recentchanges/index.html">RecentChanges</a></li>




<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?do=prefs">Preferences</a></li>




</ul>
</div>




</div> <!-- .pageheader -->



<div id="content">
<p>This feed contains pages in the "tech" category.</p>

<div id="feedlink">

<a class="feedbutton" type="application/rss+xml" href="index.rss">RSS</a>


<a class="feedbutton" type="application/atom+xml" href="index.atom">Atom</a>

</div>
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/dvb025/index.html">dvb025</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Avui m'he entretingut una mica més a esbrinar coses del demodulador de TDT que tenim endollat a la tele.</p>

<p>La caixa l'identifica com "Sansui DVB025". Mirant la <a href="http://www.sansui-global.com/">web de
Sansui</a>, no hi surt res de televisió digital ni
res de DVB025. I mirant a l'apartat de
<a href="http://www.sansui-global.com/english/worldwide.php">distribuïdors</a> veig que per
Europa distribueix una empresa italiana, <a href="http://www.motom.com">Motom Italia
Spa</a>, que per la seva web només venen motos i peces de
motos.</p>

<p>Per altra banda, obrint l'aparell, veig que a la placa hi diu DVB-T-130, i
un integrat gran etiquetat amb el nom
SPHE1003Ax. Dies enrera en vaig buscar la <em>datasheet</em> a google i altres
cercadors, però no vaig trobar res. Només n'havia trobat una <a href="http://w3.sunplus.com/products/STB/sphe1003.asp">lleugera
descripció</a> a la web del
fabricant, <a href="http://www.sunplus.com">sunplus</a>.  I avui, tot buscant altres coses, finalment l'he trobada: la
<a href="http://www.vita-desarrollos.com/documentacion/SPHE1003A_Datasheet.pdf">datasheet del
SPHE1003Ax</a>.</p>

<p>No és que hi expliqui gaire res. Però entenc que la CPU que gasten és una
<a href="http://www.sunplus.com/products/S%2Bcore.asp">S+Core</a>. Fa gràcia que parlin de
que té un joc d'instruccions privatiu, i que en canvi s'hi compila amb el
compilador GNU C/C++. Potser els hi podria demanar el codi font i tot. Però
tampoc en trauria gaire res.</p>

<p>Un amic té un receptor semblant, i de fet les cadenes que identifiquen tan el
programari com el maquinari coincideixen amb el meu (hw DVB-TV1.1, sw
sunplus_box_tv1.20). Jo en buscava codis (firmware), ja que tant el meu com el
seu permeten actualitació a través d'un fitxer en una memòria USB. Jo pel meu no
n'he trobat cap d'aquests fitxers, però ell m'ha passat un enllaç a <a href="http://www.vitecom.com/descargas/software/96-DVB2602.zip">un del
seu</a>. Mirant les
cadenes de texte (poques), he acabat ensopegant amb una cosa que apuntava
clarament al sistema operatiu de temps real
<a href="http://ecos.sourceware.org/ecos/">ecos</a>. No el coneixia pas! Ja m'ha fet gràcia
trobar-lo. I cercant una mica més, he anat a parar a una altra connexió entre
<em>sunplus</em> i ecos, en una
<a href="http://sourceware.org/ml/ecos-maintainers/2007-09/msg00000.html">carta</a> a la
llista de correu d'<em>ecos</em>. 
La placa del DVB025 té un altre punt interessant; quatre forats sense soldar on
hi diu "GND/RX/TX/+5V". Avui he rebut un <a href="http://ftdichip.com/Products/Cables/USBTTLSerial.htm">cable FTDI
USB-sèrie</a>, el
<a href="http://ftdichip.com/Support/Documents/DataSheets/Cables/DS_TTL-232R_CABLES.pdf">TTL-232R-3V3</a>,
que he comprat per accedir a això i al <a href="http://en.qi-hardware.com/wiki/Serial_console">port
sèrie</a> del
<a href="http://en.qi-hardware.com/wiki/Ben_NanoNote">nanonote</a>, de 3,3V també. I
espero que em serveixi també per aplicacions de ports sèries 5V, com la
<a href="http://wiki.gp2x.org">gp2x f200</a> potser, tot i que en tinc la
<a href="http://wiki.gp2x.org/wiki/Extra_Hardware">Cradle</a>. El port sèrie del DVB025 he
vist que sortia per
l'<a href="http://ca.wikipedia.org/wiki/Euroconnector">euroconnector</a>, on els pins són:
10-rx, 12-tx, 14-gnd. Per comprovar-ho, mireu que al 'tx' hi ha, la major part
del temps, nivell alt de 3,3V.</p>

<p>Connectant-me a allò que semblava un port sèrie, doncs, he vist que anava a
115200 bauds (per les traces que he vist per pantalla només amb aquesta
velocitat), i que per molt que hi enviés coses, no m'ha reaccionat. No n'he pas
pogut treure res més, per aquest camí; he mirat si hi havia cap
<a href="http://sourceware.org/redboot/">Redboot</a> que em permetés remenar coses, però
res.  Pel port sèrie, doncs, he rebut això:</p>

<pre>





sp8200tv_setup_ntsc









sp8200tv_setup_pal





##  timerw_isr_install  ##
TV_FORMAT 128
[DEMOD DEBUG] ## SPDC210/SPDC230/SPHE1003 Full Driver Version 5.21.0 2009/05/06 
[DEMOD DEBUG] ## RF_MODULE: NXP TDA18218 
[DEMOD DEBUG] TS output [F7:0xA0] [F8:0x19] [F9:0x0C]
[DEMOD DEBUG] ## Demod Init OK!! (1003)
[DEMOD DEBUG] TDA18218_TunerChipProgramming: SAW_8MHz!!!
[DEMOD DEBUG] tmTDA18218Init!!!
[DEMOD DEBUG] TDA18218_TunerChipProgramming: IF_FREQ = [3880000] [DEMOD DEBUG] ## Tuner Init OK!! ## [DEMOD DEBUG] TS output [F7:0xA0] [F8:0x19] [F9:0x0C]
TV_FORMAT 128
[DEMOD DEBUG] 
## tuner_connect_signal  594000000 Hz ... 
[DEMOD DEBUG] SPDC_SetBandwidth: IF_4MHz!!!
[DEMOD DEBUG] TDA18218_TunerChipProgramming: SAW_8MHz!!!
[DEMOD DEBUG] tmTDA18218Init!!!
[DEMOD DEBUG] TDA18218_TunerChipProgramming: IF_FREQ = [3880000]
[DEMOD DEBUG] ====&gt; Fail!!
</pre>

<p>No hi tenia pas ni l'antena ni la tele endollada. Potser per això les traces
sembla que indiquin desgràcies.</p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Wed Nov  3 22:47:47 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fdvb025&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="../../posts/dvb025/index.html#comments">94 comments</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/vfork_a_mips/index.html">vfork a mips</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Fa uns dies que un test d'automake va fallar a mips, però no m'havia fallat mai
gaire abans. Vaig dir-ho a la
<a href="http://lists.gnu.org/archive/html/bug-automake/2010-10/msg00017.html">llista
d'automake</a>
però al final, comentant-ho amb en Ralf de freenode (el que es cuida del linux
a mips), sembla que tot va lligat amb un problema de linux 2.6.36 i unes
històries que van afegir relacionades amb <em>syscall restarts</em>, que fa fallar
(almenys) la crida vfork() de tant en tant.</p>

<p>Els problemes no passen a 2.6.35. A veure si en Ralf ho arregla aviat.</p>

<p><em>Actualització:</em> fent proves amb en Ralf, hem determinat que el problema és en
<a href="http://git.linux-mips.org/?p=linux.git;a=commit;h=d27240bf7e61d2656de18e158ec910a902030847">aquest
canvi</a></p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Mon Nov  1 23:51:52 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fvfork_a_mips&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="../../posts/vfork_a_mips/index.html#comments">141 comments</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/pce_ht71_a_linux/index.html">pce ht71 a linux</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Ahir al vespre vaig tornar-me a posar a fer "enginyeria inversa" del sensor de temperatura <a href="http://www.pce-iberica.es/medidor-detalles-tecnicos/logger-de-datos/registrador-climatologico-pce-ht71.htm">PCE-HT71</a>.</p>

<p>Vaig utilitzar un Windows XP sobre <a href="http://qemu.org/">qemu</a> sobre Linux 2.6.35,
amb el programa original de PCE. Vaig utilitzar el mòdul <tt>usbmon</tt> i el
<a href="http://www.wireshark.org/">wireshark</a> per veure les trames USB.</p>

<p>El resultat és que passades les 3 de la nit tenia un programa que funcionava per tot el que em cal. Ho he pulit una mica, i ho he publicat <a href="../../../soft/pce/index.html">a la meva web</a>.</p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Oct 24 13:27:03 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fpce_ht71_a_linux&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fpce_ht71_a_linux&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/3_a_la_carta_al_televisor/index.html">3 a la carta al televisor</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>L'altre dia ens van deixar un televisor, pel que hem comprat un decodificador de
TDT (<a href="http://www.ciao.es/Sansui_DVB025__1937969">Sansui DVB025</a> per 35€). Aquest té USB Host i podem connectar-hi un dispositiu USB-Storage, i n'entén les particions FAT.</p>

<p>Pot gravar-hi el que li diem de la TDT (programat amb temps si cal - 2h de pel·lícula del canal <em>8tv</em> hi han ocupat 6GB en MPEG2), i a més reprodueix videos en el contenidor AVI i codificació d'imatge XVID i de so MP3 o MPEG4 AAC.</p>

<p>Amb l'ffmpeg, he vist que només reprodueix el que codifico amb la llibreria <code>libxvid</code>, i no pas res fet amb <code>mpeg4</code> o <code>msmpeg4</code>. De fet, tot i que reprodueix MPEG2 (és el que grava), aquest només el reprodueix en el contenidor MPG.</p>

<p>Com que m'agrada veure programes que han emès per TV3 (per exemple, <a href="http://www.tv3.cat/singulars">Singulars</a>), vull utilitzar el servei de <a href="http://www.tv3.cat/seccio/3alacarta">3 a la carta</a> per a veure'n els videos amb l'aparell Sansui DVB025.</p>

<p>Veient que TV3 dóna els seus videos amb <a href="http://en.wikipedia.org/wiki/RTMP">RTMP</a>, buscant una mica vaig trobar el programa <a href="http://rtmpdump.mplayerhq.hu/">rtmpdump</a> que em permet estirar
en forma d'AVI (codificats amb h264 a 15fps) el de <em>3 a la carta</em>. Vaig necessitar una mica d'anàlisi de la comunicació HTTP amb el <a href="http://www.wireshark.org/">Wireshark</a> per veure com puc transformar la URL del navegador al mirar un video, a una adreça RTMP.</p>

<p>Al final m'he acabat fent aquest script, que em baixa un video donada una URL de <em>3 a la carta</em>, i me'l passa a video XVID de 500kbps amb l'ffmpeg, tot perfecte per posar-lo a un disc dur amb interfície USB que connecto al Sansui. Li he dit <code>gettv3</code>:</p>

<pre><code>#!/bin/sh

ID=`echo "&#036;1" | sed -e 's,.*/\([0-9]*\)/\?.*&#036;,\1,' `
if [ -n "&#036;2" ]; then
    FILE="&#036;2"
else
    FILE=`echo "&#036;1" | sed 's|.*/\([^/]*\)&#036;|\1|'`.avi
fi

URL=`wget -O - 'http://www.tv3.cat/su/tvc/tvcConditionalAccess.jsp?ID='&#036;ID'&amp;QUALITY=H&amp;FORMAT=MP4&amp;rnd='&#036;RANDOM | grep rtmp | sed 's/.*\(rtmp:[^&lt;]*\).*/\1/' `

rtmpdump  -r "&#036;URL" | ffmpeg -i - -b 500000 -vcodec libxvid -acodec copy "&#036;FILE"
</code></pre>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sat May  1 16:00:07 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2F3_a_la_carta_al_televisor&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2F3_a_la_carta_al_televisor&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/Un_altre_cop_la_NES/index.html">Un altre cop la NES</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Finalment he tornat a activar la Nintendo NES al pis. Ens han deixat un
televisor que té Euroconnector, i hi puc endollar la NES amb un parell de
cables RCA.</p>

<p>Per cert, tot i que també tinc la original, faig servir la NES pirata perquè té
uns quants jocs precarregats i, el més important, la pistola.</p>

<p>Ja he jugat una estona a matar ànecs, al tir al plat (<a href="http://en.wikipedia.org/wiki/Duck_Hunt">Duck
Hunt</a>), a matar cartells de bons i
dolents, i a encertar llaunes que volen a l'aire (<a href="http://en.wikipedia.org/wiki/Hogan%27s_Alley_%28video_game%29">Hogan's
Alley</a>).
Boníssims tots.</p>

<p>Precisament vaig adquirir aquesta NES pirata amb la pistola un bon dia de Sant Jordi, als
Encants de Barcelona. A més, vaig endur-me un parell de Mega Drives amb una vintena de jocs,
i una Master System II també amb uns quants jocs. I el cartutx de Tetris de NES a part, també. Em sembla que de tot plegat en vaig pagar poc més de vint euros. Ho devia comprar el primer
o segon any de pis amb en Natxo.</p>

<p>Remenant les caixes de jocs de consola també he trobat el Zelda II de NES, que em vaig comprar
per les mateixes dates al mercat de Sant Antoni per 30€. Allà es cotitzaven cars aquests jocs.</p>

<p>Per cert, abans de muntar-ho a la televisió final, m'he decidit a provar la
meva teoria de que "la pistola no funcionarà amb els televisors LCD, per
retards al pintar". I he vist confirmada la meva sospita amb una Sony Bravia.
Disparant, no encertava res, ni des de mig pam de la pantalla.</p>

<p>I una foto de record:</p>

<p><img src="../../imatges/lluis-nes-plat.jpg" alt="Llu&iacute;s jugant al Duck Hunt - tir al plat" /></p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Apr 25 22:22:26 2010</span>
</span>


<span class="tags">
Tags:

<span class="createlink"><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=%2Ftags%2Fflashback&amp;from=posts%2FUn_altre_cop_la_NES&amp;do=create" rel="nofollow">?</a>flashback</span>

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2FUn_altre_cop_la_NES&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2FUn_altre_cop_la_NES&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/mutt/index.html">mutt</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Des que vaig començar a fer servir GMail (a finals de 2004 crec), he fet servir
la seva interfície web. Fins llavors feia servir el <a href="http://mutt.org">mutt</a>,
amb la meva adreça de correu controlada per un postfix a
<a href="http://vicerveza.homeunix.net">vicerveza</a>.</p>

<p>Ara doncs, després de sis anys, he tornat al mutt, després de veure que tenia
uns bons clients IMAPS i SMTPS (amb fitxers de memòria cau de capçaleres i
missatges). El faig servir amb el meu compte de GMail, i no em cal tenir cap
configuració especial al sistema ni tenir la meva contrassenya de GMail
guardada a disc, ja que me la demana a l'accedir als serveis per primer cop.</p>

<p>Feia temps que estava tip de la feinada que té el firefox en fer anar la web de GMail. Em semblava abusiu. Ara torno a tenir un consum de CPU raonable pel correu, i fins i tot es nota a la
temperatura del portàtil.</p>

<p>La configuració clau del <code>mutt</code> ha estat:</p>

<pre><code>set spoolfile="imaps://usuari@imap.gmail.com/"
set folder="imaps://usuari@imap.gmail.com/"
set record="=Sent"
set postponed="=Drafts"
set smtp_url="smtps://usuari@smtp.gmail.com/"
</code></pre>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Wed Apr 14 00:08:16 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fmutt&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Fmutt&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/Cau_d__39__HTTP/index.html">Cau d&#39;HTTP</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Ahir em vaig estar barallant amb com funciona l'estalvi de comunicació HTTP (HTTP Cache). Els navegadors utilitzen el protocol de comunicació HTTP per a demanar pàgines web als servidors, i l'estalvi de comunicacions HTTP ha de repercutir en una expriència de navegació més fluïda.</p>

<p>Els mecanismes que hi intervenen els podem trobar descrits a l'<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html">RFC 2616 Secció
13</a>.</p>

<p>Pel que he entès, diferencien dos grans parts del procés:</p>

<ul>
<li>Temps de validesa, edat màxima, tolerància a versions antigues (expire time,
<code>max-age</code>, <code>max-stale</code>): això acaba determinant, un cop el navegador ha
demanat una pàgina, quant de temps la considerarà prou recent com per ni
intentar saber si n'hi ha una versió més nova.</li>
<li>Revalidació: el navegador pot demanar la pàgina especificant de quan té la
última còpia, i llavors el servidor pot escollir retornar-ne una còpia nova
(<em>200 OK</em>) o simplement avisar al navegador de que ja en té una còpia prou
recent (<em>304 Nothing changed</em>). Fins i tot, amb els <em>ETags</em>, es pot comprovar per contingut i no només per data. El navegador només intenta revalidar si té almenys una còpia de la pàgina a mostrar, clar.</li>
</ul>

<p>Els paràmetres que determinen els temps involucrats en aquest estalvi de
transferències els podem establir al navegador (que és el que sol portar un
sistema cau HTTP - HTTP cache), al servidor, a cada pàgina HTML, etc.</p>

<p>L'Apache serveix contingut estàtic (fitxers de disc) per HTTP per defecte sense
anunciar cap temps de validesa (<em>Expire time</em>). Això sol voler dir que el
sistema cau (el navegador, segurament) pot escollir el temps de validesa que
cregui convenient. Per exemple, Firefox 3 crec que pràcticament dóna validesa
eterna al contingut HTTP sense temps de validesa associat.</p>

<p>A través del <code>mod_expire</code>, l'Apache pot establir un temps de validesa del
contingut de manera prou flexible. El contingut d'aquest bloc l'Apache el
serveix estàticament, i tenia el problema que la gent amb Firefox 3 havia de
forçar una recàrrega, fins i tot després d'un dia d'haver-lo visitat. Vaig
utilitzar el <code>mod_expire</code> ahir per a establir un temps de validesa de mitja
hora, que el firefox respecta perfectament. La petició del contingut de
l'exemple ha passat a les 15:43:09:</p>

<pre><code>Expires: Thu, 01 Apr 2010 14:13:09 GMT
Cache-Control: max-age=1800
</code></pre>

<p>Amb Firefox 3 vaig haver d'instal·lar el mòdul <a href="https://addons.mozilla.org/addon/3829">Live HTTP
Headers</a> per a comprovar que funcionava
bé la nova configuració.</p>

<p>Respecte a l'estalvi de transferències HTTP, crec que en els països més
desenvolupats (en termes d'ample de banda d'accés a Internet) s'ha anat perdent
el costum de respectar aquests mecanismes, i per totes bandes trobem servidors
que marquen el seu contingut com <code>must-revalidate</code> (temps de validesa zero), i
que a més el contingut és servit <em>dinàmicament</em> i lentament per programets
(PHP, Java, ...). Tot sovint en casos en què les pàgines no canvien.</p>

<p>No hem d'oblidar que el navegador hauría de respectar que l'usuari apretés el
<em>botó de Recàrrega</em>, perquè això obliga a assumir els temps de validesa zero, i
a no intentar revalidar el contingut, sino obtenir-lo de nou.</p>

<p>Els navegadors solen tenir un mode de navegació anomenat <em>Desconnectat</em>
(<em>Offline</em>), on crec que ja només funcionarien els temporitzadors de l'estil
<code>max-stale</code>, que tenen a veure amb fins a quin punt el navegador ha de tolerar
contingut caducat. No entenc gaire bé com funciona aquesta part; no hi he pas
aprofundit. Però almenys el Firefox pot fer l'experiència de treballar
<em>Desconnectat</em> molt desagradable, no mostrant sovint cap pàgina tot i que es
tracti d'una pàgina visitada recentment.</p>

<p>Per cert, vaig començar a indagar tot això de l'<em>HTTP cache</em> perquè a l'afegir
aquest bloc com a entrada de notes a Facebook, vaig fixar-me en que Facebook
comprobava si hi havia alguna entrada nova al canal de continguts RSS només
cada 24h. Això podia ser el temps de validesa que ells assignaven a pàgines que
eren entregades sense cap temps de validesa, com les que el meu servidor
servia.</p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Thu Apr  1 16:01:40 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2FCau_d__39__HTTP&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2FCau_d__39__HTTP&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/WebDAV_Delta-V/index.html">WebDAV Delta-V</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>Fa uns dies em vaig assabentar del protocol <a href="http://webdav.org/">WebDAV</a>,
definit a l'<a href="http://tools.ietf.org/html/rfc4918">RFC 4918</a>.</p>

<p>Bàsicament, es tracta d'unes extensions sobre l'HTTP (<em>Web-based Distributed
Authoring and Versioning</em>) pensades per a accedir un sistema de fitxers. O
sigui, no només demanant fitxers per URL, sino també podent demanar llistats,
pujar fitxers, etc.</p>

<p>El WebDAV bàsic inclou les operacions típiques que trobaríem a un FTP, servides
per HTTP, i a més amb la possibilitat de bloquejar-hi fitxers, a l'estil d'un
<a href="http://svnbook.red-bean.com/nightly/en/svn.basic.vsn-models.html#svn.basic.vsn-models.lock-unlock">subversion
lock</a>.
Això últim és per a permetre el treball en equip sobre un sol sistema de
fitxers.</p>

<p>L'<a href="http://httpd.apache.org/">Apache</a> pot servir un arbre del sistema de fitxers on corre mitjançant el
mòdul <a href="http://www.webdav.org/mod_dav/">mod_dav</a>, tot i que no suportarà
bloquejos si no hi fem participar també el mòdul
<a href="http://httpd.apache.org/docs/2.2/mod/mod_dav_lock.html">mod_dav_lock</a>.</p>

<p>Alguns navegadors suporten mínimament WebDAV, en bona part perquè està pensat
per encaixar mínimament amb l'HTTP que parlen els navegadors. Els linux poden
muntar sistemes de fitxers WebDAV a través del
<a href="http://savannah.nongnu.org/projects/davfs2">davfs2</a> amb
<a href="http://fuse.sourceforge.net/">FUSE</a>. I els Windows, des de Windows 98,
suporten accés WebDAV a través de les seves Carpetes Web (Web Folders). De tota
manera, els Windows Vista i 7 64-bit sembla ser que tenen alguns problemes,
sobretot amb WebDAV a través d'HTTPS. A més, també hi ha alguns programes
client expressos, tal com hi ha clients d'FTP, com el
<a href="http://www.webdav.org/cadaver/">cadaver</a>, o per Windows <a href="http://www.bitkinex.com/webdavclient/">el de
BitKinex</a>.</p>

<p>L'estrella de WebDAV és el <a href="http://subversion.org">Subversion</a>, que no només
parla WebDAV un cop servit amb Apache mitjançant el seu mòdul
<a href="http://svnbook.red-bean.com/nightly/en/svn.serverconfig.httpd.html">mod_dav_svn</a>
sino que a més parla una extensió de WebDAV anomenada
<a href="http://www.ietf.org/rfc/rfc3253.txt">DeltaV</a>, que contempla el sistema de
fitxers compartit <em>amb control de versions</em>. De fet, els clients de Subversion
parlen WebDAV+DeltaV amb el seu servidor.</p>

<p>El mòdul <code>mod_dav_svn</code>, a més, suporta el que anomenen <a href="http://svnbook.red-bean.com/nightly/en/svn.webdav.html">versionat
automàtic</a>. Això vol
dir que els clients de WebDAV que no suportin DeltaV, cada cop que pugin un
fitxer al servidor, automàticament suposarà una nova revisió de subversion, una
nova versió del sistema de fitxers.</p>

<p>Les operacions de Subversion no mapegen una-a-una amb les de WebDAV+DeltaV, com per exemple en el cas de bloquejar fitxers; per això, el mòdul <code>mod_dav_svn</code> no suporta bloquejos, i si de cas, cal muntar-hi en paral·lel un <code>mod_dav_lock</code>.</p>

<p>I tot això està inventat de fa temps, i força suportat de sèrie als sistemes operatius populars. Sembla una manera ideal de tenir un sistema de fitxers compartit, no? La única traba que hi trobo és la complexitat de muntatge lligant-hi bé tots els mòduls d'Apache necessaris. Sort de NixOS!</p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Tue Mar 30 21:57:44 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2FWebDAV_Delta-V&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="../../posts/WebDAV_Delta-V/index.html#comments">1 comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->
<div class="inlinepage">

<div class="inlineheader">


<span class="header">

<a href="../../posts/first_post/index.html">first post</a>

</span>

</div><!--.inlineheader-->

<div class="inlinecontent">
<p>This is the first post to this example blog. To add new posts, just add
files to the posts/ subdirectory, or use the web form.</p>

</div><!--.inlinecontent-->

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Mar 28 21:57:16 2010</span>
</span>


<span class="tags">
Tags:

<span class="selflink">tech</span>

</span>







<div class="actions">
<ul>

<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Ffirst_post&amp;do=edit" rel="nofollow">Edit</a></li>


<li><a href="http://vicerveza.homeunix.net/~viric/cgi-bin/ikiwiki.cgi?page=posts%2Ffirst_post&amp;do=comment">Comment</a></li>

</ul>
</div><!--.actions-->


</div><!--.inlinefooter-->

</div><!--.inlinepage-->


</div>



<div id="footer" class="pagefooter">
<div id="pageinfo">




<div id="backlinks">
Links:

<a href="../../posts/3_a_la_carta_al_televisor/index.html">posts/3 a la carta al televisor</a>

<a href="../../posts/Cau_d__39__HTTP/index.html">posts/Cau d&#39;HTTP</a>

<a href="../../posts/Un_altre_cop_la_NES/index.html">posts/Un altre cop la NES</a>

<a href="../../posts/WebDAV_Delta-V/index.html">posts/WebDAV Delta-V</a>

<a href="../../posts/dvb025/index.html">posts/dvb025</a>

<a href="../../posts/first_post/index.html">posts/first post</a>

<a href="../../posts/mutt/index.html">posts/mutt</a>

<a href="../../posts/pce_ht71_a_linux/index.html">posts/pce ht71 a linux</a>

<a href="../../posts/vfork_a_mips/index.html">posts/vfork a mips</a>


</div><!-- #backlinks -->






<div class="pagedate">
Last edited <span class="date">Mon Mar 29 00:35:49 2010</span>
<!-- Created <span class="date">Sun Mar 28 21:57:16 2010</span> -->
</div>

</div><!-- #pageinfo -->

<!-- from viricbloc -->
</div><!-- .pagefooter #footer -->

</body>
</html>
