import{d as k,i as $}from"../usePlayerStore-DETtt5pZ.js";import{u as A}from"../MinimalLayout-Dj9cT0nW.js";import{l as S,_ as h,k as x}from"../icons-Yf7pfv1X.js";import{u as N}from"../useWebAuthn-CjSxi_fw.js";import{d as P,j as C,r as b,p as I,b as n,o as i,e as t,f as g,t as s,g as _,u as r,i as V,q as U}from"../vue-B-dHMJBO.js";import"../bootstrap.esm-BZy605kZ.js";import"../lodash-BwctMegf.js";import"../MinimalLayout-Bq5lAqLQ.js";import"../lodash-Bdl6ys83.js";const R={class:"public-page"},B={class:"card p-2"},E={class:"card-body"},F={class:"row mb-4"},W={class:"col-sm"},q={key:0,class:"card-title text-center"},D={key:1,class:"card-title text-center"},M={key:2,class:"card-subtitle text-center text-muted"},T={id:"login-form",action:"",method:"post"},L={class:"form-group"},j={for:"username",class:"mb-2 d-flex align-items-center gap-2"},z=["placeholder","aria-label"],J={class:"form-group mt-3"},K={for:"password",class:"mb-2 d-flex align-items-center gap-2"},O=["placeholder","aria-label"],G={class:"form-group mt-4"},H={class:"custom-control custom-checkbox"},Q={for:"frm_remember_me",class:"custom-control-label"},X={class:"block-buttons mt-3 mb-3"},Y=["title"],Z=["action"],ee=["value"],te={class:"block-buttons mb-3"},oe=["title"],se={class:"text-center m-0"},ae=["href"],ne=P({__name:"Login",props:{hideProductName:{type:Boolean},instanceName:{},forgotPasswordUrl:{},webAuthnUrl:{}},setup(f){const l=f,{isSupported:w,isConditionalSupported:y,doValidate:c}=N(),{axios:d}=k(),u=C("$webAuthnForm"),a=b(null),m=b(null),p=async e=>{var o;m.value=JSON.stringify(e),await U(),(o=u.value)==null||o.submit()},v=async()=>{a.value===null&&(a.value=await d.get(l.webAuthnUrl).then(e=>e.data));try{const e=await c(a.value,!1);await p(e)}catch(e){console.error(e)}};return I(async()=>{if(await y()){a.value=await d.get(l.webAuthnUrl).then(o=>o.data);try{const o=await c(a.value,!0);await p(o)}catch(o){console.error(o)}}}),(e,o)=>(i(),n("div",R,[t("div",B,[t("div",E,[t("div",F,[t("div",W,[e.hideProductName?(i(),n("h2",q,s(e.$gettext("Welcome!")),1)):(i(),n("h2",D,s(e.$gettext("Welcome to AzuraCast!")),1)),e.instanceName?(i(),n("h3",M,s(e.instanceName),1)):g("",!0)])]),t("form",T,[t("div",L,[t("label",j,[_(h,{icon:r(S)},null,8,["icon"]),t("strong",null,s(e.$gettext("E-mail Address")),1)]),t("input",{id:"username",type:"email",name:"username",class:"form-control",autocomplete:"username webauthn",placeholder:e.$gettext("name@example.com"),"aria-label":e.$gettext("E-mail Address"),required:"",autofocus:""},null,8,z)]),t("div",J,[t("label",K,[_(h,{icon:r(x)},null,8,["icon"]),t("strong",null,s(e.$gettext("Password")),1)]),t("input",{id:"password",type:"password",name:"password",class:"form-control",autocomplete:"current-password",placeholder:e.$gettext("Enter your password"),"aria-label":e.$gettext("Password"),required:""},null,8,O)]),t("div",G,[t("div",H,[o[0]||(o[0]=t("input",{id:"frm_remember_me",type:"checkbox",name:"remember",value:"1",class:"toggle-switch custom-control-input"},null,-1)),t("label",Q,s(e.$gettext("Remember me")),1)])]),t("div",X,[t("button",{type:"submit",role:"button",title:e.$gettext("Sign In"),class:"btn btn-login btn-primary"},s(e.$gettext("Sign In")),9,Y)])]),r(w)?(i(),n("form",{key:0,id:"webauthn-form",ref_key:"$webAuthnForm",ref:u,action:e.webAuthnUrl,method:"post"},[t("input",{type:"hidden",name:"validateData",value:m.value},null,8,ee),t("div",te,[t("button",{type:"button",role:"button",title:e.$gettext("Sign In with Passkey"),class:"btn btn-sm btn-secondary",onClick:v},s(e.$gettext("Sign In with Passkey")),9,oe)])],8,Z)):g("",!0),t("p",se,[V(s(e.$gettext("Please log in to continue."))+" ",1),t("a",{href:e.forgotPasswordUrl},s(e.$gettext("Forgot your password?")),9,ae)])])])]))}});$(A(ne));
