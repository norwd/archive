
<pre style="color:#000000;background:#ffffff;"><span style="color:#004a43; ">#</span><span style="color:#004a43; ">include </span><span style="color:#800000; ">&lt;</span><span style="color:#40015a; ">stdlib.h</span><span style="color:#800000; ">&gt;</span><span style="color:#004a43; "> </span><span style="color:#696969; ">// card &gt; pixar.ppm</span>
<span style="color:#004a43; ">#</span><span style="color:#004a43; ">include </span><span style="color:#800000; ">&lt;</span><span style="color:#40015a; ">stdio.h</span><span style="color:#800000; ">&gt;</span>
<span style="color:#004a43; ">#</span><span style="color:#004a43; ">include </span><span style="color:#800000; ">&lt;</span><span style="color:#40015a; ">math.h</span><span style="color:#800000; ">&gt;</span>

<span style="color:#004a43; ">#</span><span style="color:#004a43; ">define</span><span style="color:#004a43; "> R return</span>
<span style="color:#004a43; ">#</span><span style="color:#004a43; ">define</span><span style="color:#004a43; "> O operator</span>
<span style="color:#800000; font-weight:bold; ">typedef</span> <span style="color:#800000; font-weight:bold; ">float</span> F<span style="color:#800080; ">;</span>
<span style="color:#800000; font-weight:bold; ">typedef</span> <span style="color:#800000; font-weight:bold; ">int</span> I<span style="color:#800080; ">;</span>

<span style="color:#800000; font-weight:bold; ">struct</span> V <span style="color:#800080; ">{</span>
    F x<span style="color:#808030; ">,</span> y<span style="color:#808030; ">,</span> z<span style="color:#800080; ">;</span>

    V<span style="color:#808030; ">(</span>F v <span style="color:#808030; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span> x <span style="color:#808030; ">=</span> y <span style="color:#808030; ">=</span> z <span style="color:#808030; ">=</span> v<span style="color:#800080; ">;</span> <span style="color:#800080; ">}</span>

    V<span style="color:#808030; ">(</span>F a<span style="color:#808030; ">,</span> F b<span style="color:#808030; ">,</span> F
    c <span style="color:#808030; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      x <span style="color:#808030; ">=</span> a<span style="color:#800080; ">;</span>
      y <span style="color:#808030; ">=</span> b<span style="color:#800080; ">;</span>
      z <span style="color:#808030; ">=</span> c<span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>

    V O<span style="color:#808030; ">+</span><span style="color:#808030; ">(</span>V r<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span> R V<span style="color:#808030; ">(</span>x <span style="color:#808030; ">+</span> r<span style="color:#808030; ">.</span>x<span style="color:#808030; ">,</span> y <span style="color:#808030; ">+</span> r<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span> z <span style="color:#808030; ">+</span> r<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span> <span style="color:#800080; ">}</span>

    V O<span style="color:#808030; ">*</span><span style="color:#808030; ">(</span>V r<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      R V<span style="color:#808030; ">(</span>x <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>x<span style="color:#808030; ">,</span> y <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>
              y<span style="color:#808030; ">,</span> z <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>

    F O<span style="color:#808030; ">%</span><span style="color:#808030; ">(</span>V r<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span> R x <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>x <span style="color:#808030; ">+</span> y <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>y <span style="color:#808030; ">+</span> z <span style="color:#808030; ">*</span> r<span style="color:#808030; ">.</span>z<span style="color:#800080; ">;</span> <span style="color:#800080; ">}</span>

    V O<span style="color:#808030; ">!</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      R <span style="color:#808030; ">*</span><span style="color:#800000; font-weight:bold; ">this</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span><span style="color:#008c00; ">1</span> <span style="color:#808030; ">/</span> sqrtf<span style="color:#808030; ">(</span><span style="color:#808030; ">*</span><span style="color:#800000; font-weight:bold; ">this</span> <span style="color:#808030; ">%</span> <span style="color:#808030; ">*</span><span style="color:#800000; font-weight:bold; ">this</span><span style="color:#808030; ">)</span>
      <span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>
<span style="color:#800080; ">}</span><span style="color:#800080; ">;</span>

F L<span style="color:#808030; ">(</span>F l<span style="color:#808030; ">,</span> F r<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span> R l <span style="color:#808030; ">&lt;</span> r <span style="color:#800080; ">?</span> l <span style="color:#800080; ">:</span> r<span style="color:#800080; ">;</span> <span style="color:#800080; ">}</span>

F U<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span> R <span style="color:#808030; ">(</span>F<span style="color:#808030; ">)</span> <span style="color:#603000; ">rand</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">/</span> RAND_MAX<span style="color:#800080; ">;</span> <span style="color:#800080; ">}</span>

F B<span style="color:#808030; ">(</span>V p<span style="color:#808030; ">,</span> V l<span style="color:#808030; ">,</span> V h<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
  l <span style="color:#808030; ">=</span> p
      <span style="color:#808030; ">+</span> l <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
  h <span style="color:#808030; ">=</span> h <span style="color:#808030; ">+</span> p <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
  R <span style="color:#808030; ">-</span>L<span style="color:#808030; ">(</span>L<span style="color:#808030; ">(</span>L<span style="color:#808030; ">(</span>l<span style="color:#808030; ">.</span>x<span style="color:#808030; ">,</span> h<span style="color:#808030; ">.</span>x<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> L<span style="color:#808030; ">(</span>l<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span> h<span style="color:#808030; ">.</span>y<span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> L<span style="color:#808030; ">(</span>l<span style="color:#808030; ">.</span>z<span style="color:#808030; ">,</span> h<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
<span style="color:#800080; ">}</span>

F S<span style="color:#808030; ">(</span>V p<span style="color:#808030; ">,</span> I <span style="color:#808030; ">&amp;</span>m<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
  F d <span style="color:#808030; ">=</span> <span style="color:#008c00; ">1</span>\

  e9<span style="color:#800080; ">;</span>
  V f <span style="color:#808030; ">=</span> p<span style="color:#800080; ">;</span>
  f<span style="color:#808030; ">.</span>z <span style="color:#808030; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">char</span> l<span style="color:#808030; ">[</span><span style="color:#808030; ">]</span> <span style="color:#808030; ">=</span> <span style="color:#800000; ">"</span><span style="color:#0000e6; ">5O5_5W9W5_9_COC_AOEOA_E_IOQ_I_QOUOY_Y_]OWW[WaOa_aWeWa_e_cWiO</span><span style="color:#800000; ">"</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I i <span style="color:#808030; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#800080; ">;</span> i <span style="color:#808030; ">&lt;</span> <span style="color:#008c00; ">60</span><span style="color:#800080; ">;</span> i <span style="color:#808030; ">+</span><span style="color:#808030; ">=</span> <span style="color:#008c00; ">4</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
    V b <span style="color:#808030; ">=</span> V<span style="color:#808030; ">(</span>l<span style="color:#808030; ">[</span>i<span style="color:#808030; ">]</span> <span style="color:#808030; ">-</span> <span style="color:#008c00; ">79</span><span style="color:#808030; ">,</span> l<span style="color:#808030; ">[</span>i <span style="color:#808030; ">+</span> <span style="color:#008c00; ">1</span><span style="color:#808030; ">]</span> <span style="color:#808030; ">-</span> <span style="color:#008c00; ">79</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#008000; ">.5</span><span style="color:#808030; ">,</span> e <span style="color:#808030; ">=</span> V<span style="color:#808030; ">(</span>l<span style="color:#808030; ">[</span>i <span style="color:#808030; ">+</span> <span style="color:#008c00; ">2</span><span style="color:#808030; ">]</span> <span style="color:#808030; ">-</span> <span style="color:#008c00; ">79</span><span style="color:#808030; ">,</span> l
                                                                 <span style="color:#808030; ">[</span>i <span style="color:#808030; ">+</span> <span style="color:#008c00; ">3</span><span style="color:#808030; ">]</span> <span style="color:#808030; ">-</span> <span style="color:#008c00; ">79</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#008000; ">.5</span> <span style="color:#808030; ">+</span> b <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#808030; ">,</span> o <span style="color:#808030; ">=</span>
            f <span style="color:#808030; ">+</span> <span style="color:#808030; ">(</span>b <span style="color:#808030; ">+</span> e <span style="color:#808030; ">*</span> L<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span>L<span style="color:#808030; ">(</span><span style="color:#808030; ">(</span>b <span style="color:#808030; ">+</span> f <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">%</span> e <span style="color:#808030; ">/</span> <span style="color:#808030; ">(</span>e <span style="color:#808030; ">%</span> e<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">1</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
    d <span style="color:#808030; ">=</span> L<span style="color:#808030; ">(</span>d<span style="color:#808030; ">,</span> o <span style="color:#808030; ">%</span> o<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#800080; ">}</span>
  d <span style="color:#808030; ">=</span> sq\

  rtf<span style="color:#808030; ">(</span>d<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  V a<span style="color:#808030; ">[</span><span style="color:#808030; ">]</span> <span style="color:#808030; ">=</span> <span style="color:#800080; ">{</span>V<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span><span style="color:#008c00; ">11</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">6</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">11</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">6</span><span style="color:#808030; ">)</span><span style="color:#800080; ">}</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I i <span style="color:#808030; ">=</span> <span style="color:#008c00; ">2</span><span style="color:#800080; ">;</span> i<span style="color:#808030; ">-</span><span style="color:#808030; ">-</span><span style="color:#800080; ">;</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
    V o <span style="color:#808030; ">=</span> f <span style="color:#808030; ">+</span> a<span style="color:#808030; ">[</span>i<span style="color:#808030; ">]</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
    d <span style="color:#808030; ">=</span> L<span style="color:#808030; ">(</span>d<span style="color:#808030; ">,</span> o<span style="color:#808030; ">.</span>x <span style="color:#808030; ">&gt;</span> <span style="color:#008c00; ">0</span> <span style="color:#800080; ">?</span> f\
absf<span style="color:#808030; ">(</span>sqrtf<span style="color:#808030; ">(</span>o <span style="color:#808030; ">%</span> o<span style="color:#808030; ">)</span> <span style="color:#808030; ">-</span> <span style="color:#008c00; ">2</span><span style="color:#808030; ">)</span><span style="color:#800080; ">:</span><span style="color:#808030; ">(</span>o<span style="color:#808030; ">.</span>y <span style="color:#808030; ">+</span><span style="color:#808030; ">=</span> o<span style="color:#808030; ">.</span>y <span style="color:#808030; ">&gt;</span> <span style="color:#008c00; ">0</span> <span style="color:#800080; ">?</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">2</span> <span style="color:#800080; ">:</span> <span style="color:#008c00; ">2</span><span style="color:#808030; ">,</span> sqrtf<span style="color:#808030; ">(</span>o <span style="color:#808030; ">%</span> o<span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#800080; ">}</span>
  d <span style="color:#808030; ">=</span> powf<span style="color:#808030; ">(</span>powf<span style="color:#808030; ">(</span>d<span style="color:#808030; ">,</span> <span style="color:#008c00; ">8</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> powf<span style="color:#808030; ">(</span>p<span style="color:#808030; ">.</span>z<span style="color:#808030; ">,</span>
                             <span style="color:#008c00; ">8</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> <span style="color:#008000; ">.125</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">-</span> <span style="color:#008000; ">.5</span><span style="color:#800080; ">;</span>
  m <span style="color:#808030; ">=</span> <span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
  F r <span style="color:#808030; ">=</span> L<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span>L<span style="color:#808030; ">(</span>B<span style="color:#808030; ">(</span>p<span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span><span style="color:#008c00; ">30</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span><span style="color:#008000; ">.5</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">30</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">30</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">18</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">30</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> B<span style="color:#808030; ">(</span>p<span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span><span style="color:#008c00; ">25</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">17</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">25</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> V
          <span style="color:#808030; ">(</span><span style="color:#008c00; ">25</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">20</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">25</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> B<span style="color:#808030; ">(</span>V<span style="color:#808030; ">(</span>fmodf<span style="color:#808030; ">(</span>fabsf<span style="color:#808030; ">(</span>p<span style="color:#808030; ">.</span>x<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">8</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> p<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span> p<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#008000; ">1.5</span><span style="color:#808030; ">,</span> <span style="color:#008000; ">18.5</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">25</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> V<span style="color:#808030; ">(</span><span style="color:#008000; ">6.5</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">20</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">25</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>r <span style="color:#808030; ">&lt;</span> d<span style="color:#808030; ">)</span>d <span style="color:#808030; ">=</span> r<span style="color:#808030; ">,</span> m <span style="color:#808030; ">=</span> <span style="color:#008c00; ">2</span><span style="color:#800080; ">;</span>
  F s <span style="color:#808030; ">=</span> <span style="color:#008000; ">19.9</span> <span style="color:#808030; ">-</span> p<span style="color:#808030; ">.</span>y<span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>s <span style="color:#808030; ">&lt;</span> d<span style="color:#808030; ">)</span>d <span style="color:#808030; ">=</span> s<span style="color:#808030; ">,</span> m <span style="color:#808030; ">=</span> <span style="color:#008c00; ">3</span><span style="color:#800080; ">;</span>
  R d<span style="color:#800080; ">;</span>
<span style="color:#800080; ">}</span>

I M<span style="color:#808030; ">(</span>V o<span style="color:#808030; ">,</span> V d<span style="color:#808030; ">,</span> V <span style="color:#808030; ">&amp;</span>h<span style="color:#808030; ">,</span> V <span style="color:#808030; ">&amp;</span>n<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
  I m<span style="color:#808030; ">,</span> s <span style="color:#808030; ">=</span>
          <span style="color:#008c00; ">0</span><span style="color:#800080; ">;</span>
  F t <span style="color:#808030; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">,</span> c<span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span><span style="color:#800080; ">;</span> t <span style="color:#808030; ">&lt;</span> <span style="color:#008c00; ">100</span><span style="color:#800080; ">;</span> t <span style="color:#808030; ">+</span><span style="color:#808030; ">=</span> c<span style="color:#808030; ">)</span>
    <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span><span style="color:#808030; ">(</span>c <span style="color:#808030; ">=</span> S<span style="color:#808030; ">(</span>h <span style="color:#808030; ">=</span> o <span style="color:#808030; ">+</span> d <span style="color:#808030; ">*</span> t<span style="color:#808030; ">,</span> m<span style="color:#808030; ">)</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">&lt;</span> <span style="color:#008000; ">.01</span> <span style="color:#808030; ">|</span><span style="color:#808030; ">|</span> <span style="color:#808030; ">+</span><span style="color:#808030; ">+</span>s <span style="color:#808030; ">&gt;</span> <span style="color:#008c00; ">99</span><span style="color:#808030; ">)</span>
      R n <span style="color:#808030; ">=</span> <span style="color:#808030; ">!</span>V<span style="color:#808030; ">(</span>S<span style="color:#808030; ">(</span>h <span style="color:#808030; ">+</span> V<span style="color:#808030; ">(</span><span style="color:#008000; ">.01</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">0</span>
      <span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">-</span> c<span style="color:#808030; ">,</span> S<span style="color:#808030; ">(</span>h <span style="color:#808030; ">+</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">0</span><span style="color:#808030; ">,</span> <span style="color:#008000; ">.01</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">-</span> c<span style="color:#808030; ">,</span> S<span style="color:#808030; ">(</span>h <span style="color:#808030; ">+</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">0</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">,</span> <span style="color:#008000; ">.01</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">-</span> c<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> m<span style="color:#800080; ">;</span>
  R <span style="color:#008c00; ">0</span><span style="color:#800080; ">;</span>
<span style="color:#800080; ">}</span>

V T<span style="color:#808030; ">(</span>V o<span style="color:#808030; ">,</span> V d<span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
  V h<span style="color:#808030; ">,</span> n<span style="color:#808030; ">,</span> r<span style="color:#808030; ">,</span> t <span style="color:#808030; ">=</span>
          <span style="color:#008c00; ">1</span><span style="color:#808030; ">,</span> l<span style="color:#808030; ">(</span><span style="color:#808030; ">!</span>V<span style="color:#808030; ">(</span><span style="color:#008000; ">.6</span><span style="color:#808030; ">,</span> <span style="color:#008000; ">.6</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">1</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I b <span style="color:#808030; ">=</span> <span style="color:#008c00; ">3</span><span style="color:#800080; ">;</span> b<span style="color:#808030; ">-</span><span style="color:#808030; ">-</span><span style="color:#800080; ">;</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
    I m <span style="color:#808030; ">=</span> M<span style="color:#808030; ">(</span>o<span style="color:#808030; ">,</span> d<span style="color:#808030; ">,</span> h<span style="color:#808030; ">,</span> n<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
    <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span><span style="color:#808030; ">!</span>m<span style="color:#808030; ">)</span><span style="color:#800000; font-weight:bold; ">break</span><span style="color:#800080; ">;</span>
    <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>m <span style="color:#808030; ">=</span><span style="color:#808030; ">=</span> <span style="color:#008c00; ">1</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      d <span style="color:#808030; ">=</span> d <span style="color:#808030; ">+</span> n <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span>
              n <span style="color:#808030; ">%</span> d <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">2</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
      o <span style="color:#808030; ">=</span> h <span style="color:#808030; ">+</span> d <span style="color:#808030; ">*</span> <span style="color:#008000; ">.1</span><span style="color:#800080; ">;</span>
      t <span style="color:#808030; ">=</span> t <span style="color:#808030; ">*</span> <span style="color:#008000; ">.2</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>
    <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>m <span style="color:#808030; ">=</span><span style="color:#808030; ">=</span> <span style="color:#008c00; ">2</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      F i <span style="color:#808030; ">=</span> n <span style="color:#808030; ">%</span> l<span style="color:#808030; ">,</span> p <span style="color:#808030; ">=</span> <span style="color:#008000; ">6.283185</span> <span style="color:#808030; ">*</span> U<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> c <span style="color:#808030; ">=</span> U<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> s <span style="color:#808030; ">=</span> sqrtf<span style="color:#808030; ">(</span><span style="color:#008c00; ">1</span> <span style="color:#808030; ">-</span> c<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span>
              g <span style="color:#808030; ">=</span> n<span style="color:#808030; ">.</span>z <span style="color:#808030; ">&lt;</span> <span style="color:#008c00; ">0</span> <span style="color:#800080; ">?</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span> <span style="color:#800080; ">:</span> <span style="color:#008c00; ">1</span><span style="color:#808030; ">,</span> u <span style="color:#808030; ">=</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span> <span style="color:#808030; ">/</span> <span style="color:#808030; ">(</span>g <span style="color:#808030; ">+</span> n<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> v <span style="color:#808030; ">=</span> n<span style="color:#808030; ">.</span>x <span style="color:#808030; ">*</span> n<span style="color:#808030; ">.</span>y <span style="color:#808030; ">*</span> u<span style="color:#800080; ">;</span>
      d <span style="color:#808030; ">=</span> V<span style="color:#808030; ">(</span>v<span style="color:#808030; ">,</span> g <span style="color:#808030; ">+</span> n<span style="color:#808030; ">.</span>y <span style="color:#808030; ">*</span> n<span style="color:#808030; ">.</span>y <span style="color:#808030; ">*</span> u<span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span>n<span style="color:#808030; ">.</span>y<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span>cosf<span style="color:#808030; ">(</span>p<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> V<span style="color:#808030; ">(</span>
              <span style="color:#008c00; ">1</span> <span style="color:#808030; ">+</span> g <span style="color:#808030; ">*</span> n<span style="color:#808030; ">.</span>x <span style="color:#808030; ">*</span> n<span style="color:#808030; ">.</span>x <span style="color:#808030; ">*</span> u<span style="color:#808030; ">,</span> g <span style="color:#808030; ">*</span> v<span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span>g <span style="color:#808030; ">*</span> n<span style="color:#808030; ">.</span>x<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span>sinf<span style="color:#808030; ">(</span>p<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> n <span style="color:#808030; ">*</span> sqrtf<span style="color:#808030; ">(</span>c<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
      o <span style="color:#808030; ">=</span> h <span style="color:#808030; ">+</span> d <span style="color:#808030; ">*</span> <span style="color:#008000; ">.1</span><span style="color:#800080; ">;</span>
      t <span style="color:#808030; ">=</span> t <span style="color:#808030; ">*</span> <span style="color:#008000; ">.2</span><span style="color:#800080; ">;</span>
      <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>i <span style="color:#808030; ">&gt;</span> <span style="color:#008c00; ">0</span> <span style="color:#808030; ">&amp;</span><span style="color:#808030; ">&amp;</span> M<span style="color:#808030; ">(</span>h
                     <span style="color:#808030; ">+</span> n <span style="color:#808030; ">*</span> <span style="color:#008000; ">.1</span><span style="color:#808030; ">,</span> l<span style="color:#808030; ">,</span> h<span style="color:#808030; ">,</span> n<span style="color:#808030; ">)</span> <span style="color:#808030; ">=</span><span style="color:#808030; ">=</span> <span style="color:#008c00; ">3</span><span style="color:#808030; ">)</span>
        r <span style="color:#808030; ">=</span> r <span style="color:#808030; ">+</span> t <span style="color:#808030; ">*</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">500</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">400</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">100</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> i<span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>
    <span style="color:#800000; font-weight:bold; ">if</span> <span style="color:#808030; ">(</span>m <span style="color:#808030; ">=</span><span style="color:#808030; ">=</span> <span style="color:#008c00; ">3</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      r <span style="color:#808030; ">=</span> r <span style="color:#808030; ">+</span> t <span style="color:#808030; ">*</span> V<span style="color:#808030; ">(</span><span style="color:#008c00; ">50</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">80</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">100</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
      <span style="color:#800000; font-weight:bold; ">break</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>
  <span style="color:#800080; ">}</span>
  R r<span style="color:#800080; ">;</span>
<span style="color:#800080; ">}</span>

I <span style="color:#400000; ">main</span><span style="color:#808030; ">(</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
  I w <span style="color:#808030; ">=</span> <span style="color:#008c00; ">960</span><span style="color:#808030; ">,</span> h <span style="color:#808030; ">=</span> <span style="color:#008c00; ">540</span><span style="color:#808030; ">,</span> s <span style="color:#808030; ">=</span> <span style="color:#008c00; ">8</span><span style="color:#800080; ">;</span>
  V e<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span><span style="color:#008c00; ">22</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">5</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">25</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> g <span style="color:#808030; ">=</span> <span style="color:#808030; ">!</span><span style="color:#808030; ">(</span>V<span style="color:#808030; ">(</span><span style="color:#808030; ">-</span><span style="color:#008c00; ">3</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">4</span><span style="color:#808030; ">,</span> <span style="color:#008c00; ">0</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> e <span style="color:#808030; ">*</span> <span style="color:#808030; ">-</span><span style="color:#008c00; ">1</span><span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> l <span style="color:#808030; ">=</span> <span style="color:#808030; ">!</span>V<span style="color:#808030; ">(</span>g<span style="color:#808030; ">.</span>z<span style="color:#808030; ">,</span>
                                                       <span style="color:#008c00; ">0</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">-</span>g<span style="color:#808030; ">.</span>x<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span><span style="color:#008c00; ">1</span><span style="color:#808030; ">.</span> <span style="color:#808030; ">/</span> w<span style="color:#808030; ">)</span><span style="color:#808030; ">,</span> u<span style="color:#808030; ">(</span>g<span style="color:#808030; ">.</span>y <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>z <span style="color:#808030; ">-</span> g<span style="color:#808030; ">.</span>z <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span>
                                                                              g<span style="color:#808030; ">.</span>z <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>x <span style="color:#808030; ">-</span> g<span style="color:#808030; ">.</span>x <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>z<span style="color:#808030; ">,</span>
                                                                              g<span style="color:#808030; ">.</span>x <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>y <span style="color:#808030; ">-</span> g<span style="color:#808030; ">.</span>y <span style="color:#808030; ">*</span> l<span style="color:#808030; ">.</span>x<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#603000; ">printf</span><span style="color:#808030; ">(</span><span style="color:#800000; ">"</span><span style="color:#0000e6; ">P6 </span><span style="color:#007997; ">%d</span><span style="color:#0000e6; "> </span><span style="color:#007997; ">%d</span><span style="color:#0000e6; "> 255 </span><span style="color:#800000; ">"</span><span style="color:#808030; ">,</span> w<span style="color:#808030; ">,</span> h<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
  <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I y <span style="color:#808030; ">=</span> h<span style="color:#800080; ">;</span> y<span style="color:#808030; ">-</span><span style="color:#808030; ">-</span><span style="color:#800080; ">;</span><span style="color:#808030; ">)</span>
    <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I x <span style="color:#808030; ">=</span> w<span style="color:#800080; ">;</span> x<span style="color:#808030; ">-</span><span style="color:#808030; ">-</span><span style="color:#800080; ">;</span><span style="color:#808030; ">)</span> <span style="color:#800080; ">{</span>
      V c<span style="color:#800080; ">;</span>
      <span style="color:#800000; font-weight:bold; ">for</span> <span style="color:#808030; ">(</span>I p <span style="color:#808030; ">=</span> s<span style="color:#800080; ">;</span> p<span style="color:#808030; ">-</span><span style="color:#808030; ">-</span><span style="color:#800080; ">;</span><span style="color:#808030; ">)</span>c <span style="color:#808030; ">=</span> c <span style="color:#808030; ">+</span> T<span style="color:#808030; ">(</span>e<span style="color:#808030; ">,</span> <span style="color:#808030; ">!</span><span style="color:#808030; ">(</span>g <span style="color:#808030; ">+</span> l <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span>x <span style="color:#808030; ">-</span> w <span style="color:#808030; ">/</span> <span style="color:#008c00; ">2</span> <span style="color:#808030; ">+</span> U<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> u <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span>y <span style="color:#808030; ">-</span> h <span style="color:#808030; ">/</span> <span style="color:#008c00; ">2</span> <span style="color:#808030; ">+</span> U<span style="color:#808030; ">(</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
      c <span style="color:#808030; ">=</span> c <span style="color:#808030; ">*</span> <span style="color:#808030; ">(</span><span style="color:#008c00; ">1</span><span style="color:#808030; ">.</span> <span style="color:#808030; ">/</span> s<span style="color:#808030; ">)</span> <span style="color:#808030; ">+</span> <span style="color:#008c00; ">14</span><span style="color:#808030; ">.</span> <span style="color:#808030; ">/</span> <span style="color:#008c00; ">241</span><span style="color:#800080; ">;</span>
      V o <span style="color:#808030; ">=</span> c <span style="color:#808030; ">+</span> <span style="color:#008c00; ">1</span><span style="color:#800080; ">;</span>
      c <span style="color:#808030; ">=</span> V<span style="color:#808030; ">(</span>c<span style="color:#808030; ">.</span>x <span style="color:#808030; ">/</span> o<span style="color:#808030; ">.</span>x<span style="color:#808030; ">,</span> c<span style="color:#808030; ">.</span>
              y <span style="color:#808030; ">/</span> o<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span> c<span style="color:#808030; ">.</span>z <span style="color:#808030; ">/</span> o<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span> <span style="color:#808030; ">*</span> <span style="color:#008c00; ">255</span><span style="color:#800080; ">;</span>
      <span style="color:#603000; ">printf</span><span style="color:#808030; ">(</span><span style="color:#800000; ">"</span><span style="color:#007997; ">%c</span><span style="color:#007997; ">%c</span><span style="color:#007997; ">%c</span><span style="color:#800000; ">"</span><span style="color:#808030; ">,</span> <span style="color:#808030; ">(</span>I<span style="color:#808030; ">)</span> c<span style="color:#808030; ">.</span>x<span style="color:#808030; ">,</span> <span style="color:#808030; ">(</span>I<span style="color:#808030; ">)</span> c<span style="color:#808030; ">.</span>y<span style="color:#808030; ">,</span> <span style="color:#808030; ">(</span>I<span style="color:#808030; ">)</span> c<span style="color:#808030; ">.</span>z<span style="color:#808030; ">)</span><span style="color:#800080; ">;</span>
    <span style="color:#800080; ">}</span>
<span style="color:#800080; ">}</span><span style="color:#696969; ">// Andrew Kensler</span>
</pre>
