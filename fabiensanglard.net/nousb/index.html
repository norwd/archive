<html>
<head>
  <link rel="alternate" type="application/rss+xml"  title="RSS Feed for fabiensanglard.net" href="../rss.xml" />
  <style type="text/css">

    @font-face {
      font-family: 'fabfont';
      src: url('../font/DejaVuSansMono.woff2');
      font-display: block;
    }

    @font-face {
      font-family: 'fabfont';
      src: url('../font/DejaVuSansMono-Bold.woff2');
      font-weight: bold;
      font-display: block;
    }

    * {
       font-size: 16px;
    }

    html {
      font-family: fabfont,  monospace;
      max-width: 900px;  /* For Desktop PC (see @media for Tablets/Phones) */
      padding-left: 2%;
      padding-right: 3%;
      margin: 0 auto;
      background: #F5F5F0;
  	} 
    


  	a {
      color: black;
      font-weight: bold;
    }

    img {
      border: none; 
    }

    p {
      margin-top: 0px;
      text-align: justify;
    }
    sup {
      vertical-align: 0.3em;
      font-size: 0.65em;
    }   

    pre {
      font-family: fabfont, monospace;
      background-color: white; 
      border: 1px solid Black; 
      padding-left: 2%;
      padding-top: 1ch;
      padding-bottom: 1ch;
      /* Only take care of X overflow since this is the only part that can be too wide.
         The Y axis will never overflow.
      */
      overflow: hidden;
    }

    div.heading {
      font-weight: bold;      
      text-transform: uppercase;
      margin-top: 4ch;
    }

    /** {
      font-size: 16px;
    }*/
    @media (max-width: 500px) { /* For small screen decices */
      * {
        font-size: 12px; 
      }
    }   
    .title {
      text-decoration: none;
    }

    img.pixel, canvas.pixel {
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }

    blockquote { 
    background-color: #f3f3f3;
    border: dashed 1px grey; 
    width: 97.5%; 
    font-style: italic; 
    text-align: justify;

    padding: 1ch; 
    padding-top: 2ch; 
    padding-bottom: 2ch;     
    
    margin : 0ch; 
    margin-bottom: 2ch; 
    margin-top: 0ch;
  }

  blockquote div {
    text-transform: none;
    text-align: right;
    width: 100%;
  }

  code {
    /*font-size: 110%;*/
    font-weight: bold;
    background-color: #e1e1e1;
    border-radius: 0.5ch;
    padding-left: 0.3ch;
    padding-right: 0.3ch;
  }

  .trivia {
    border-left: 1px black solid;
    padding-left: 1ch;
  }

  .trivia::before {
  font-weight: bold;
  text-decoration: underline;
  padding-right: 1ch;
  content: "Trivia:";

  </style>
  <title>The confusing world of USB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=12.0, minimum-scale=1.0, user-scalable=yes">
</head>  
  <body><br><center>
    <div style="display: inline-block; vertical-align:middle;">
<a href="../index.html" class="title"><b>FABIEN SANGLARD'S WEBSITE</b><br>
</a><hr/><div style="text-align: justify;display: inline-block; width: 100%;">
<!-- <a class="title" href="/about/index.html">ABOUT</a> &nbsp;<a class="title" href="/contact/index.html">EMAIL</a> &nbsp;<a class="title" href="../rss.xml">RSS</a> &nbsp;<a class="title" href="https://paypal.me/fabiensanglard">DONATE</a></div></div> -->
<a class="title" href="../about/index.html">ABOUT</a> &nbsp;<a class="title" href="../contact/index.html">CONTACT</a> &nbsp;<a class="title" href="../rss.xml">RSS</a> &nbsp;<a class="title" href="https://paypal.me/fabiensanglard">GIVE</a></div></div>

</center><br><br>
<div style="margin-bottom: 2ch;text-transform: none;">
January 10, 2021</div>
<div class='heading'>The confusing world of USB</div><hr/><style type="text/css">
img {
  border: 1px black solid; 
}
</style>
<p>
	For decades, my perception of USB was that of a technology both simple and reliable. You plug it and it works. The two first iterations<a name="back_1" style="text-decoration: none;" href="index.html#footnote_1"><sup>[1]</sup></a><a name="back_2" style="text-decoration: none;" href="index.html#footnote_2"><sup>[2]</sup></a> freed PCs from a badly fragmented connector world made of RJ-45 (Ethernet), DA-15 (Joystick), DE-9 (Serial), DIN (PS/2), SCSI, and DB-25 (Parallel). 
<br/>
<br/>
	When USB-3.0 came out, USB-IF had the good idea to color code its ports. All you had to do was to "check for blue" in the chain to get your 5 Gbit/s. Even better, around the same time were introduced type-C connectors. Not only the world was a faster place, now we could plug things with one try instead of three.  
<br/>	
<br/>	
Up to that point in time, it was a good tech stack. Yet in 2013 things started to become confusing.

<br/>	
</p>
<div class='heading'>Naming</div><hr/><p>
 With USB 3.1 the bandwidth doubled to 10 Gbit/s. But USB-IF called it "USB 3.1 Gen 2" with the "old" USB 3.0 to be refereed to as "USB 3.1 Gen1". They did it again in 2017 with what people would have liked to be "USB 3.2". We got 20 Gbit/s except it was to be called "USB 3.2 Gen 2x2". Accordingly "USB 3.1 Gen 2" became "USB 3.2 Gen 2x1" and "USB 3.1 Gen 1" was renamed "USB 3.2 Gen 1x1".
<br/>	
</p>


<div class='heading'>Display-Port Alternate Mode</div><hr/><p>
	<a href="usb_wires.svg">
<img loading="lazy" src="usb_wires.svg" width="209.13063mm" height="79.849937mm" style="width: 40%; height: auto; float: right; margin-bottom:2ch; margin-left:2ch;background-color: white;"/></a>
USB-3.X cables features 8 wires<a name="back_3" style="text-decoration: none;" href="index.html#footnote_3"><sup>[3]</sup></a>. Two of then are for power and the other six carry data. Two data wires are dedicated to USB-2 legacy traffic while the other four are for USB-3.X SuperSpeed transfer.
<br/>	
<br/>	

In 2014, VESA had the idea to re-purpose some of the wires and published "DisplayPort Alternate Mode" specs<a name="back_4" style="text-decoration: none;" href="index.html#footnote_4"><sup>[4]</sup></a>. Display Port signal could now be carried over 1, 2, or 4 of the 3.X wires (calling them lanes).
<br/>	
<br/>	
It works fine as long as one or two lanes are used for DP 1.2. But to display a 4K60Hz image, DP 1.2 bandwidth requirements demands to use all four lanes which leaves only two USB-2 wires for data. This leaves a lot of "implementation dependent" behavior up to people who build USB hubs.
<br/>	
<br/>	
Thanks to DP 1.4, the bandwidth requirement can be lowered via DSP lossy compression. This allows 4k60Hz on two lanes with lanes available for USB-3.X traffic but it can be tricky to discover which hub can do DP 1.4.
<br/>	
</p>

<div class='heading'>Power Delivery (USB-PD)</div><hr/><p>
	USB-2 provides up to 2.5W. USB-3 brings it to 4.5W and USB-3.2 takes it to 7.5W. In what I assume was an effort to accommodate vendors who wanted to build chargers, USB-IF published standalone power protocols.
	 There is USB-BC (Battery Charging) v1, v1.1, and v1.2. Then came USB-PD (Power Delivery) v1, v2, and v3.
<br/>	
<br/>	
Which USB-PD version is included in each USB-X "core" specs is something I did not take the time to establish but I would expect it to be non-trivial. 
<br/>	
<br/>	
On top of these open specs exist a myriad of proprietary cell-phones "fast charging" protocols. Motorola has "Rapid Charging" and "Turbo Power"<a name="back_5" style="text-decoration: none;" href="index.html#footnote_5"><sup>[5]</sup></a>. OnePlus has "Dash Charge" / "Warp Charge" while Realme have "Dart Charge" (both based on VOOC 2.0, VOOC 3.0,  SuperVOOC, VOOC 4, or SuperVOOC 2.0<a name="back_6" style="text-decoration: none;" href="index.html#footnote_6"><sup>[6]</sup></a>). Finally Qualcomm phone have "Quick Charge"<a name="back_7" style="text-decoration: none;" href="index.html#footnote_7"><sup>[7]</sup></a> v1, v2, v3, v4 and v4+.
<br/>	
</p>

<div class='heading'>USB4</div><hr/><p>
	<style type="text/css">
	#usb4 table, #usb4 td, #usb4 th {
  border: 1px solid #ddd;
  padding: 0.3ch;
</style>
<table id="usb4" style="float: right; margin-left: 2ch; margin-bottom: 1ch; background-color: white;border-collapse: collapse;">
<tbody><tr>
<th>USB4 Feature
</th>
<th>Host
</th>
<th>Hub
</th>
<th>Peripheral
</th></tr>
<tr>
<td>USB 2.0 (480&nbsp;Mbit/s)</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes
</td></tr>
<tr>
<td>USB4 20&nbsp;Gbit/s Transport</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes
</td></tr>
<tr>
<td>USB4 40&nbsp;Gbit/s Transport</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">? </td></tr>
<tr>
<td>Tunneled USB&nbsp;3.2 (10&nbsp;Gbit/s)</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">? </td></tr>
<tr>
<td>Tunneled USB&nbsp;3.2 (20&nbsp;Gbit/s)</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td></tr>
<tr>
<td>Tunneled Displayport</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?
</td></tr>
<tr>
<td>Tunneled PCI Express</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?
</td></tr>
<tr>
<td>Host-to-Host communications</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td data-sort-value="" style="background: #ececec; color: #2C2C2C; vertical-align: middle; text-align: center;" class="table-na">N/A
</td></tr>
<tr>
<td>DisplayPort Alternate Mode</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?
</td></tr>
<tr>
<td>Thunderbolt Alternate Mode</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background:#9F9;vertical-align:middle;text-align:center;" class="table-yes">Yes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?
</td></tr>
<tr>
<td>USB-C Alternate Modes</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?</td>
<td style="background: #ddffdd; color: black; vertical-align: middle; text-align: center;">?
</td></tr></tbody></table>

USB4 specs<a name="back_8" style="text-decoration: none;" href="index.html#footnote_8"><sup>[8]</sup></a> were released in August 2019. In terms of transfer speed there are two flavors, 20 Gbit/s and 40 Gbit/s named respectively "USB4 Gen 2×2" and "USB4 Gen 3×2". 
<br/>
<br/>

There is an impressive list of features that come with this version. Among them, several of Thunderbolt-3 tunneling capabilities. Unfortunately a lot of them are optional depending on the type of device involved. 
<br/>
<br/>
When these devices become available, the difficulty from a customer stand point will be to identify which feature a constructor has decided to implement. Wikipedia has a nice summary matrix.
<br/>
<br/>
Also notice that it seems there are three ways to perform what at first sight is the same thing with USB-C Alt-Mode, USB4 DP Tunneling and TB3 DP Tunneling possibly supported simultaneously.

</p>



<div class='heading'>No Thunderbolt = No Buy</div><hr/><p>
The USB world has reached a complexity level which exceeds the amount of time I can dedicate to understanding it. 
While I was researching USB hubs, I kept on running into their Thunderbolt-3 counterparts which seemed not only superior in capabilities but also far simpler.
<br/>
<br/>
The advertisement flier from Intel sums it up. Thanks to "minimum solution requirements", customers "know what they are getting".
<br/>
<table><tr><td width="44.2%">
<a href="cables.jpg"><img loading="lazy" src="cables.webp" width="1280" height="911" style="width: 100%; height: auto; margin-top: 2ch; margin-bottom:2ch;"/></a>
</td>
<td >
<a href="tb4_comp.jpg"><img loading="lazy" src="tb4_comp.webp" width="2048" height="1152" style="width: 100%; height: auto; margin-top: 2ch; margin-bottom:2ch;"/></a>
</td></tr></table>
Yes it favors something proprietary over something open since Thunderbolt is 100% owned by Intel who also produce all controllers. Yes, it is more expensive. But it seems to "just work" like USB used to.
<br/>
<br/>
 And so, for the foreseeable future, the first thing I will look at in a new laptop/desktop/hub will be direct support for Thunderbolt-3.
<br/>
</p>
<style type='text/css'>td.ref {  padding-bottom: 0ch; width:0;}</style><div class='heading'>References</div><hr/><p id='paperbox' style='text-align:left;'><table><tbody style='vertical-align: top;'><tr><td class='ref' style='width:1ch;'><a name="footnote_1"></a><a href="index.html#back_1">^</a></td><td  class='ref' style='width:4ch;'> [1]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://www.usb.org/developers/docs/usbspec.zip">USB 1.1 Specifications</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_2"></a><a href="index.html#back_2">^</a></td><td  class='ref' style='width:4ch;'> [2]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://usb.org/sites/default/files/usb_20_20190524.zip">USB 2.0 Specifications</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_3"></a><a href="index.html#back_3">^</a></td><td  class='ref' style='width:4ch;'> [3]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://news.ycombinator.com/item?id=25727885">Up to USB "3.2 Gen 2x1", cables had 8 wires but USB "3.2 Gen2x2" has 12 because of added RX2 and TX2 pairs</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_4"></a><a href="index.html#back_4">^</a></td><td  class='ref' style='width:4ch;'> [4]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://www.vesa.org/wp-content/uploads/2016/10/USB-DevDays-DisplayPort-Alternate-Mode-2016-final4.pdf">DisplayPort Alternate Mode Specifications</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_5"></a><a href="index.html#back_5">^</a></td><td  class='ref' style='width:4ch;'> [5]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://www.motorola.com/us/motorola-turbopower-flip-18w-wall-charger/p">Turbo Charge</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_6"></a><a href="index.html#back_6">^</a></td><td  class='ref' style='width:4ch;'> [6]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://en.wikipedia.org/wiki/VOOC">Dash/Warp/Dart Charge</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_7"></a><a href="index.html#back_7">^</a></td><td  class='ref' style='width:4ch;'> [7]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://en.wikipedia.org/wiki/Quick_Charge">Quick Charge</a></td></tr><tr><td class='ref' style='width:1ch;'><a name="footnote_8"></a><a href="index.html#back_8">^</a></td><td  class='ref' style='width:4ch;'> [8]</td><td style='width:100%;text-align:left;' class='ref'><a href="https://www.usb.org/document-library/usb4tm-specification">USB 4.0 Specification</a></td></tr></tbody></table></p> <hr>
 <center>*